-- MySQL Administrator dump 1.4
--
-- ------------------------------------------------------
-- Server version	5.0.95-log


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;


--
-- Create schema cardservice
--

CREATE DATABASE IF NOT EXISTS cardservice;
USE cardservice;
CREATE TABLE  `cardservice`.`card` (
  `cardId` int(11) NOT NULL auto_increment,
  `issuerId` int(11) NOT NULL,
  `par` int(11) NOT NULL,
  PRIMARY KEY  (`cardId`),
  KEY `fk_issuerId` (`issuerId`),
  KEY `idx_par` (`par`),
  CONSTRAINT `fk_issuerId` FOREIGN KEY (`issuerId`) REFERENCES `issuer` (`issuerId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=32 DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED;
INSERT INTO `cardservice`.`card` VALUES  (1,1,10000),
 (2,1,20000),
 (3,1,30000),
 (4,1,50000),
 (5,1,100000),
 (6,1,200000),
 (7,1,300000),
 (8,1,500000),
 (9,2,10000),
 (10,2,20000),
 (11,2,30000),
 (12,2,50000),
 (13,2,100000),
 (14,2,200000),
 (15,2,300000),
 (16,2,500000),
 (17,1,0),
 (18,2,0),
 (19,3,100000),
 (20,1,5000),
 (21,3,0),
 (22,3,10000),
 (23,11,10000),
 (24,11,20000),
 (25,11,30000),
 (26,11,50000),
 (27,11,100000),
 (28,11,200000),
 (29,11,300000),
 (30,11,500000),
 (31,11,0);
CREATE TABLE  `cardservice`.`compare_issuer` (
  `compareIssuerId` int(11) NOT NULL auto_increment,
  `cardId` int(11) NOT NULL,
  `requestDate` date default NULL,
  `month` int(11) default NULL,
  `year` int(11) default NULL,
  `originalVolume` int(11) NOT NULL,
  `vietpayVolume` int(11) default NULL,
  `issuerVolume` int(11) default NULL,
  PRIMARY KEY  (`compareIssuerId`),
  KEY `idx_month_year` (`month`,`year`),
  KEY `fk_compare_issuer_card` (`cardId`)
) ENGINE=InnoDB AUTO_INCREMENT=4559 DEFAULT CHARSET=utf8;
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4068,20,NULL,4,2012,0,0,NULL),
 (4069,1,NULL,4,2012,0,0,NULL),
 (4070,2,NULL,4,2012,0,0,NULL),
 (4071,3,NULL,4,2012,0,0,NULL),
 (4072,4,NULL,4,2012,0,0,NULL),
 (4073,5,NULL,4,2012,0,0,NULL),
 (4074,6,NULL,4,2012,0,0,NULL),
 (4075,7,NULL,4,2012,0,0,NULL),
 (4076,8,NULL,4,2012,0,0,NULL),
 (4077,9,'2012-04-30',4,2012,0,0,NULL),
 (4078,10,'2012-04-30',4,2012,0,0,NULL),
 (4079,11,'2012-04-30',4,2012,0,0,NULL),
 (4080,12,'2012-04-30',4,2012,0,0,NULL),
 (4081,13,'2012-04-30',4,2012,0,0,NULL),
 (4082,14,'2012-04-30',4,2012,0,0,NULL),
 (4083,15,'2012-04-30',4,2012,0,0,NULL),
 (4084,16,'2012-04-30',4,2012,0,0,NULL),
 (4085,9,'2012-04-29',4,2012,0,0,NULL),
 (4086,10,'2012-04-29',4,2012,0,0,NULL),
 (4087,11,'2012-04-29',4,2012,0,0,NULL),
 (4088,12,'2012-04-29',4,2012,0,0,NULL),
 (4089,13,'2012-04-29',4,2012,0,0,NULL),
 (4090,14,'2012-04-29',4,2012,0,0,NULL),
 (4091,15,'2012-04-29',4,2012,0,0,NULL),
 (4092,16,'2012-04-29',4,2012,0,0,NULL),
 (4093,9,'2012-04-28',4,2012,0,0,NULL),
 (4094,10,'2012-04-28',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4095,11,'2012-04-28',4,2012,0,0,NULL),
 (4096,12,'2012-04-28',4,2012,0,0,NULL),
 (4097,13,'2012-04-28',4,2012,0,0,NULL),
 (4098,14,'2012-04-28',4,2012,0,0,NULL),
 (4099,15,'2012-04-28',4,2012,0,0,NULL),
 (4100,16,'2012-04-28',4,2012,0,0,NULL),
 (4101,9,'2012-04-27',4,2012,0,0,NULL),
 (4102,10,'2012-04-27',4,2012,0,0,NULL),
 (4103,11,'2012-04-27',4,2012,0,0,NULL),
 (4104,12,'2012-04-27',4,2012,0,0,NULL),
 (4105,13,'2012-04-27',4,2012,0,0,NULL),
 (4106,14,'2012-04-27',4,2012,0,0,NULL),
 (4107,15,'2012-04-27',4,2012,0,0,NULL),
 (4108,16,'2012-04-27',4,2012,0,0,NULL),
 (4109,9,'2012-04-26',4,2012,0,0,NULL),
 (4110,10,'2012-04-26',4,2012,0,0,NULL),
 (4111,11,'2012-04-26',4,2012,0,0,NULL),
 (4112,12,'2012-04-26',4,2012,0,0,NULL),
 (4113,13,'2012-04-26',4,2012,0,0,NULL),
 (4114,14,'2012-04-26',4,2012,0,0,NULL),
 (4115,15,'2012-04-26',4,2012,0,0,NULL),
 (4116,16,'2012-04-26',4,2012,0,0,NULL),
 (4117,9,'2012-04-25',4,2012,0,0,NULL),
 (4118,10,'2012-04-25',4,2012,0,0,NULL),
 (4119,11,'2012-04-25',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4120,12,'2012-04-25',4,2012,0,0,NULL),
 (4121,13,'2012-04-25',4,2012,0,0,NULL),
 (4122,14,'2012-04-25',4,2012,0,0,NULL),
 (4123,15,'2012-04-25',4,2012,0,0,NULL),
 (4124,16,'2012-04-25',4,2012,0,0,NULL),
 (4125,9,'2012-04-24',4,2012,0,0,NULL),
 (4126,10,'2012-04-24',4,2012,0,0,NULL),
 (4127,11,'2012-04-24',4,2012,0,0,NULL),
 (4128,12,'2012-04-24',4,2012,0,0,NULL),
 (4129,13,'2012-04-24',4,2012,0,0,NULL),
 (4130,14,'2012-04-24',4,2012,0,0,NULL),
 (4131,15,'2012-04-24',4,2012,0,0,NULL),
 (4132,16,'2012-04-24',4,2012,0,0,NULL),
 (4133,9,'2012-04-23',4,2012,0,0,NULL),
 (4134,10,'2012-04-23',4,2012,0,0,NULL),
 (4135,11,'2012-04-23',4,2012,0,0,NULL),
 (4136,12,'2012-04-23',4,2012,0,0,NULL),
 (4137,13,'2012-04-23',4,2012,0,0,NULL),
 (4138,14,'2012-04-23',4,2012,0,0,NULL),
 (4139,15,'2012-04-23',4,2012,0,0,NULL),
 (4140,16,'2012-04-23',4,2012,0,0,NULL),
 (4141,9,'2012-04-22',4,2012,0,0,NULL),
 (4142,10,'2012-04-22',4,2012,0,0,NULL),
 (4143,11,'2012-04-22',4,2012,0,0,NULL),
 (4144,12,'2012-04-22',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4145,13,'2012-04-22',4,2012,0,0,NULL),
 (4146,14,'2012-04-22',4,2012,0,0,NULL),
 (4147,15,'2012-04-22',4,2012,0,0,NULL),
 (4148,16,'2012-04-22',4,2012,0,0,NULL),
 (4149,9,'2012-04-21',4,2012,0,0,NULL),
 (4150,10,'2012-04-21',4,2012,0,0,NULL),
 (4151,11,'2012-04-21',4,2012,0,0,NULL),
 (4152,12,'2012-04-21',4,2012,0,0,NULL),
 (4153,13,'2012-04-21',4,2012,0,0,NULL),
 (4154,14,'2012-04-21',4,2012,0,0,NULL),
 (4155,15,'2012-04-21',4,2012,0,0,NULL),
 (4156,16,'2012-04-21',4,2012,0,0,NULL),
 (4157,9,'2012-04-20',4,2012,0,0,NULL),
 (4158,10,'2012-04-20',4,2012,0,0,NULL),
 (4159,11,'2012-04-20',4,2012,0,0,NULL),
 (4160,12,'2012-04-20',4,2012,0,0,NULL),
 (4161,13,'2012-04-20',4,2012,0,0,NULL),
 (4162,14,'2012-04-20',4,2012,0,0,NULL),
 (4163,15,'2012-04-20',4,2012,0,0,NULL),
 (4164,16,'2012-04-20',4,2012,0,0,NULL),
 (4165,9,'2012-04-19',4,2012,0,0,NULL),
 (4166,10,'2012-04-19',4,2012,0,0,NULL),
 (4167,11,'2012-04-19',4,2012,0,0,NULL),
 (4168,12,'2012-04-19',4,2012,0,0,NULL),
 (4169,13,'2012-04-19',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4170,14,'2012-04-19',4,2012,0,0,NULL),
 (4171,15,'2012-04-19',4,2012,0,0,NULL),
 (4172,16,'2012-04-19',4,2012,0,0,NULL),
 (4173,9,'2012-04-18',4,2012,0,0,NULL),
 (4174,10,'2012-04-18',4,2012,0,0,NULL),
 (4175,11,'2012-04-18',4,2012,0,0,NULL),
 (4176,12,'2012-04-18',4,2012,0,0,NULL),
 (4177,13,'2012-04-18',4,2012,0,0,NULL),
 (4178,14,'2012-04-18',4,2012,0,0,NULL),
 (4179,15,'2012-04-18',4,2012,0,0,NULL),
 (4180,16,'2012-04-18',4,2012,0,0,NULL),
 (4181,9,'2012-04-17',4,2012,0,0,NULL),
 (4182,10,'2012-04-17',4,2012,0,0,NULL),
 (4183,11,'2012-04-17',4,2012,0,0,NULL),
 (4184,12,'2012-04-17',4,2012,0,0,NULL),
 (4185,13,'2012-04-17',4,2012,0,0,NULL),
 (4186,14,'2012-04-17',4,2012,0,0,NULL),
 (4187,15,'2012-04-17',4,2012,0,0,NULL),
 (4188,16,'2012-04-17',4,2012,0,0,NULL),
 (4189,9,'2012-04-16',4,2012,0,0,NULL),
 (4190,10,'2012-04-16',4,2012,0,0,NULL),
 (4191,11,'2012-04-16',4,2012,0,0,NULL),
 (4192,12,'2012-04-16',4,2012,0,0,NULL),
 (4193,13,'2012-04-16',4,2012,0,0,NULL),
 (4194,14,'2012-04-16',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4195,15,'2012-04-16',4,2012,0,0,NULL),
 (4196,16,'2012-04-16',4,2012,0,0,NULL),
 (4197,9,'2012-04-15',4,2012,0,0,NULL),
 (4198,10,'2012-04-15',4,2012,0,0,NULL),
 (4199,11,'2012-04-15',4,2012,0,0,NULL),
 (4200,12,'2012-04-15',4,2012,0,0,NULL),
 (4201,13,'2012-04-15',4,2012,0,0,NULL),
 (4202,14,'2012-04-15',4,2012,0,0,NULL),
 (4203,15,'2012-04-15',4,2012,0,0,NULL),
 (4204,16,'2012-04-15',4,2012,0,0,NULL),
 (4205,9,'2012-04-14',4,2012,0,0,NULL),
 (4206,10,'2012-04-14',4,2012,0,0,NULL),
 (4207,11,'2012-04-14',4,2012,0,0,NULL),
 (4208,12,'2012-04-14',4,2012,0,0,NULL),
 (4209,13,'2012-04-14',4,2012,0,0,NULL),
 (4210,14,'2012-04-14',4,2012,0,0,NULL),
 (4211,15,'2012-04-14',4,2012,0,0,NULL),
 (4212,16,'2012-04-14',4,2012,0,0,NULL),
 (4213,9,'2012-04-13',4,2012,0,0,NULL),
 (4214,10,'2012-04-13',4,2012,0,0,NULL),
 (4215,11,'2012-04-13',4,2012,0,0,NULL),
 (4216,12,'2012-04-13',4,2012,0,0,NULL),
 (4217,13,'2012-04-13',4,2012,0,0,NULL),
 (4218,14,'2012-04-13',4,2012,0,0,NULL),
 (4219,15,'2012-04-13',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4220,16,'2012-04-13',4,2012,0,0,NULL),
 (4221,9,'2012-04-12',4,2012,0,0,NULL),
 (4222,10,'2012-04-12',4,2012,0,0,NULL),
 (4223,11,'2012-04-12',4,2012,0,0,NULL),
 (4224,12,'2012-04-12',4,2012,0,0,NULL),
 (4225,13,'2012-04-12',4,2012,0,0,NULL),
 (4226,14,'2012-04-12',4,2012,0,0,NULL),
 (4227,15,'2012-04-12',4,2012,0,0,NULL),
 (4228,16,'2012-04-12',4,2012,0,0,NULL),
 (4229,9,'2012-04-11',4,2012,0,0,NULL),
 (4230,10,'2012-04-11',4,2012,0,0,NULL),
 (4231,11,'2012-04-11',4,2012,0,0,NULL),
 (4232,12,'2012-04-11',4,2012,0,0,NULL),
 (4233,13,'2012-04-11',4,2012,0,0,NULL),
 (4234,14,'2012-04-11',4,2012,0,0,NULL),
 (4235,15,'2012-04-11',4,2012,0,0,NULL),
 (4236,16,'2012-04-11',4,2012,0,0,NULL),
 (4237,9,'2012-04-10',4,2012,0,0,NULL),
 (4238,10,'2012-04-10',4,2012,0,0,NULL),
 (4239,11,'2012-04-10',4,2012,0,0,NULL),
 (4240,12,'2012-04-10',4,2012,0,0,NULL),
 (4241,13,'2012-04-10',4,2012,0,0,NULL),
 (4242,14,'2012-04-10',4,2012,0,0,NULL),
 (4243,15,'2012-04-10',4,2012,0,0,NULL),
 (4244,16,'2012-04-10',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4245,9,'2012-04-09',4,2012,0,0,NULL),
 (4246,10,'2012-04-09',4,2012,0,0,NULL),
 (4247,11,'2012-04-09',4,2012,0,0,NULL),
 (4248,12,'2012-04-09',4,2012,0,0,NULL),
 (4249,13,'2012-04-09',4,2012,0,0,NULL),
 (4250,14,'2012-04-09',4,2012,0,0,NULL),
 (4251,15,'2012-04-09',4,2012,0,0,NULL),
 (4252,16,'2012-04-09',4,2012,0,0,NULL),
 (4253,9,'2012-04-08',4,2012,0,0,NULL),
 (4254,10,'2012-04-08',4,2012,0,0,NULL),
 (4255,11,'2012-04-08',4,2012,0,0,NULL),
 (4256,12,'2012-04-08',4,2012,0,0,NULL),
 (4257,13,'2012-04-08',4,2012,0,0,NULL),
 (4258,14,'2012-04-08',4,2012,0,0,NULL),
 (4259,15,'2012-04-08',4,2012,0,0,NULL),
 (4260,16,'2012-04-08',4,2012,0,0,NULL),
 (4261,9,'2012-04-07',4,2012,0,0,NULL),
 (4262,10,'2012-04-07',4,2012,0,0,NULL),
 (4263,11,'2012-04-07',4,2012,0,0,NULL),
 (4264,12,'2012-04-07',4,2012,0,0,NULL),
 (4265,13,'2012-04-07',4,2012,0,0,NULL),
 (4266,14,'2012-04-07',4,2012,0,0,NULL),
 (4267,15,'2012-04-07',4,2012,0,0,NULL),
 (4268,16,'2012-04-07',4,2012,0,0,NULL),
 (4269,9,'2012-04-06',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4270,10,'2012-04-06',4,2012,0,0,NULL),
 (4271,11,'2012-04-06',4,2012,0,0,NULL),
 (4272,12,'2012-04-06',4,2012,0,0,NULL),
 (4273,13,'2012-04-06',4,2012,0,0,NULL),
 (4274,14,'2012-04-06',4,2012,0,0,NULL),
 (4275,15,'2012-04-06',4,2012,0,0,NULL),
 (4276,16,'2012-04-06',4,2012,0,0,NULL),
 (4277,9,'2012-04-05',4,2012,0,0,NULL),
 (4278,10,'2012-04-05',4,2012,0,0,NULL),
 (4279,11,'2012-04-05',4,2012,0,0,NULL),
 (4280,12,'2012-04-05',4,2012,0,0,NULL),
 (4281,13,'2012-04-05',4,2012,0,0,NULL),
 (4282,14,'2012-04-05',4,2012,0,0,NULL),
 (4283,15,'2012-04-05',4,2012,0,0,NULL),
 (4284,16,'2012-04-05',4,2012,0,0,NULL),
 (4285,9,'2012-04-04',4,2012,0,0,NULL),
 (4286,10,'2012-04-04',4,2012,0,0,NULL),
 (4287,11,'2012-04-04',4,2012,0,0,NULL),
 (4288,12,'2012-04-04',4,2012,0,0,NULL),
 (4289,13,'2012-04-04',4,2012,0,0,NULL),
 (4290,14,'2012-04-04',4,2012,0,0,NULL),
 (4291,15,'2012-04-04',4,2012,0,0,NULL),
 (4292,16,'2012-04-04',4,2012,0,0,NULL),
 (4293,9,'2012-04-03',4,2012,0,0,NULL),
 (4294,10,'2012-04-03',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4295,11,'2012-04-03',4,2012,0,0,NULL),
 (4296,12,'2012-04-03',4,2012,0,0,NULL),
 (4297,13,'2012-04-03',4,2012,0,0,NULL),
 (4298,14,'2012-04-03',4,2012,0,0,NULL),
 (4299,15,'2012-04-03',4,2012,0,0,NULL),
 (4300,16,'2012-04-03',4,2012,0,0,NULL),
 (4301,9,'2012-04-02',4,2012,0,0,NULL),
 (4302,10,'2012-04-02',4,2012,0,0,NULL),
 (4303,11,'2012-04-02',4,2012,0,0,NULL),
 (4304,12,'2012-04-02',4,2012,0,0,NULL),
 (4305,13,'2012-04-02',4,2012,0,0,NULL),
 (4306,14,'2012-04-02',4,2012,0,0,NULL),
 (4307,15,'2012-04-02',4,2012,0,0,NULL),
 (4308,16,'2012-04-02',4,2012,0,0,NULL),
 (4309,9,'2012-04-01',4,2012,0,0,NULL),
 (4310,10,'2012-04-01',4,2012,0,0,NULL),
 (4311,11,'2012-04-01',4,2012,0,0,NULL),
 (4312,12,'2012-04-01',4,2012,0,0,NULL),
 (4313,13,'2012-04-01',4,2012,0,0,NULL),
 (4314,14,'2012-04-01',4,2012,0,0,NULL),
 (4315,15,'2012-04-01',4,2012,0,0,NULL),
 (4316,16,'2012-04-01',4,2012,0,0,NULL),
 (4317,22,NULL,4,2012,0,0,NULL),
 (4318,19,NULL,4,2012,0,0,NULL),
 (4319,23,'2012-04-30',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4320,24,'2012-04-30',4,2012,0,0,NULL),
 (4321,25,'2012-04-30',4,2012,0,0,NULL),
 (4322,26,'2012-04-30',4,2012,0,0,NULL),
 (4323,27,'2012-04-30',4,2012,0,0,NULL),
 (4324,28,'2012-04-30',4,2012,0,0,NULL),
 (4325,29,'2012-04-30',4,2012,0,0,NULL),
 (4326,30,'2012-04-30',4,2012,0,0,NULL),
 (4327,23,'2012-04-29',4,2012,0,0,NULL),
 (4328,24,'2012-04-29',4,2012,0,0,NULL),
 (4329,25,'2012-04-29',4,2012,0,0,NULL),
 (4330,26,'2012-04-29',4,2012,0,0,NULL),
 (4331,27,'2012-04-29',4,2012,0,0,NULL),
 (4332,28,'2012-04-29',4,2012,0,0,NULL),
 (4333,29,'2012-04-29',4,2012,0,0,NULL),
 (4334,30,'2012-04-29',4,2012,0,0,NULL),
 (4335,23,'2012-04-28',4,2012,0,0,NULL),
 (4336,24,'2012-04-28',4,2012,0,0,NULL),
 (4337,25,'2012-04-28',4,2012,0,0,NULL),
 (4338,26,'2012-04-28',4,2012,0,0,NULL),
 (4339,27,'2012-04-28',4,2012,0,0,NULL),
 (4340,28,'2012-04-28',4,2012,0,0,NULL),
 (4341,29,'2012-04-28',4,2012,0,0,NULL),
 (4342,30,'2012-04-28',4,2012,0,0,NULL),
 (4343,23,'2012-04-27',4,2012,0,0,NULL),
 (4344,24,'2012-04-27',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4345,25,'2012-04-27',4,2012,0,0,NULL),
 (4346,26,'2012-04-27',4,2012,0,0,NULL),
 (4347,27,'2012-04-27',4,2012,0,0,NULL),
 (4348,28,'2012-04-27',4,2012,0,0,NULL),
 (4349,29,'2012-04-27',4,2012,0,0,NULL),
 (4350,30,'2012-04-27',4,2012,0,0,NULL),
 (4351,23,'2012-04-26',4,2012,0,0,NULL),
 (4352,24,'2012-04-26',4,2012,0,0,NULL),
 (4353,25,'2012-04-26',4,2012,0,0,NULL),
 (4354,26,'2012-04-26',4,2012,0,0,NULL),
 (4355,27,'2012-04-26',4,2012,0,0,NULL),
 (4356,28,'2012-04-26',4,2012,0,0,NULL),
 (4357,29,'2012-04-26',4,2012,0,0,NULL),
 (4358,30,'2012-04-26',4,2012,0,0,NULL),
 (4359,23,'2012-04-25',4,2012,0,0,NULL),
 (4360,24,'2012-04-25',4,2012,0,0,NULL),
 (4361,25,'2012-04-25',4,2012,0,0,NULL),
 (4362,26,'2012-04-25',4,2012,0,0,NULL),
 (4363,27,'2012-04-25',4,2012,0,0,NULL),
 (4364,28,'2012-04-25',4,2012,0,0,NULL),
 (4365,29,'2012-04-25',4,2012,0,0,NULL),
 (4366,30,'2012-04-25',4,2012,0,0,NULL),
 (4367,23,'2012-04-24',4,2012,0,0,NULL),
 (4368,24,'2012-04-24',4,2012,0,0,NULL),
 (4369,25,'2012-04-24',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4370,26,'2012-04-24',4,2012,0,0,NULL),
 (4371,27,'2012-04-24',4,2012,0,0,NULL),
 (4372,28,'2012-04-24',4,2012,0,0,NULL),
 (4373,29,'2012-04-24',4,2012,0,0,NULL),
 (4374,30,'2012-04-24',4,2012,0,0,NULL),
 (4375,23,'2012-04-23',4,2012,0,0,NULL),
 (4376,24,'2012-04-23',4,2012,0,0,NULL),
 (4377,25,'2012-04-23',4,2012,0,0,NULL),
 (4378,26,'2012-04-23',4,2012,0,0,NULL),
 (4379,27,'2012-04-23',4,2012,0,0,NULL),
 (4380,28,'2012-04-23',4,2012,0,0,NULL),
 (4381,29,'2012-04-23',4,2012,0,0,NULL),
 (4382,30,'2012-04-23',4,2012,0,0,NULL),
 (4383,23,'2012-04-22',4,2012,0,0,NULL),
 (4384,24,'2012-04-22',4,2012,0,0,NULL),
 (4385,25,'2012-04-22',4,2012,0,0,NULL),
 (4386,26,'2012-04-22',4,2012,0,0,NULL),
 (4387,27,'2012-04-22',4,2012,0,0,NULL),
 (4388,28,'2012-04-22',4,2012,0,0,NULL),
 (4389,29,'2012-04-22',4,2012,0,0,NULL),
 (4390,30,'2012-04-22',4,2012,0,0,NULL),
 (4391,23,'2012-04-21',4,2012,0,0,NULL),
 (4392,24,'2012-04-21',4,2012,0,0,NULL),
 (4393,25,'2012-04-21',4,2012,0,0,NULL),
 (4394,26,'2012-04-21',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4395,27,'2012-04-21',4,2012,0,0,NULL),
 (4396,28,'2012-04-21',4,2012,0,0,NULL),
 (4397,29,'2012-04-21',4,2012,0,0,NULL),
 (4398,30,'2012-04-21',4,2012,0,0,NULL),
 (4399,23,'2012-04-20',4,2012,0,0,NULL),
 (4400,24,'2012-04-20',4,2012,0,0,NULL),
 (4401,25,'2012-04-20',4,2012,0,0,NULL),
 (4402,26,'2012-04-20',4,2012,0,0,NULL),
 (4403,27,'2012-04-20',4,2012,0,0,NULL),
 (4404,28,'2012-04-20',4,2012,0,0,NULL),
 (4405,29,'2012-04-20',4,2012,0,0,NULL),
 (4406,30,'2012-04-20',4,2012,0,0,NULL),
 (4407,23,'2012-04-19',4,2012,0,0,NULL),
 (4408,24,'2012-04-19',4,2012,0,0,NULL),
 (4409,25,'2012-04-19',4,2012,0,0,NULL),
 (4410,26,'2012-04-19',4,2012,0,0,NULL),
 (4411,27,'2012-04-19',4,2012,0,0,NULL),
 (4412,28,'2012-04-19',4,2012,0,0,NULL),
 (4413,29,'2012-04-19',4,2012,0,0,NULL),
 (4414,30,'2012-04-19',4,2012,0,0,NULL),
 (4415,23,'2012-04-18',4,2012,0,0,NULL),
 (4416,24,'2012-04-18',4,2012,0,0,NULL),
 (4417,25,'2012-04-18',4,2012,0,0,NULL),
 (4418,26,'2012-04-18',4,2012,0,0,NULL),
 (4419,27,'2012-04-18',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4420,28,'2012-04-18',4,2012,0,0,NULL),
 (4421,29,'2012-04-18',4,2012,0,0,NULL),
 (4422,30,'2012-04-18',4,2012,0,0,NULL),
 (4423,23,'2012-04-17',4,2012,0,0,NULL),
 (4424,24,'2012-04-17',4,2012,0,0,NULL),
 (4425,25,'2012-04-17',4,2012,0,0,NULL),
 (4426,26,'2012-04-17',4,2012,0,0,NULL),
 (4427,27,'2012-04-17',4,2012,0,0,NULL),
 (4428,28,'2012-04-17',4,2012,0,0,NULL),
 (4429,29,'2012-04-17',4,2012,0,0,NULL),
 (4430,30,'2012-04-17',4,2012,0,0,NULL),
 (4431,23,'2012-04-16',4,2012,0,0,NULL),
 (4432,24,'2012-04-16',4,2012,0,0,NULL),
 (4433,25,'2012-04-16',4,2012,0,0,NULL),
 (4434,26,'2012-04-16',4,2012,0,0,NULL),
 (4435,27,'2012-04-16',4,2012,0,0,NULL),
 (4436,28,'2012-04-16',4,2012,0,0,NULL),
 (4437,29,'2012-04-16',4,2012,0,0,NULL),
 (4438,30,'2012-04-16',4,2012,0,0,NULL),
 (4439,23,'2012-04-15',4,2012,0,0,NULL),
 (4440,24,'2012-04-15',4,2012,0,0,NULL),
 (4441,25,'2012-04-15',4,2012,0,0,NULL),
 (4442,26,'2012-04-15',4,2012,0,0,NULL),
 (4443,27,'2012-04-15',4,2012,0,0,NULL),
 (4444,28,'2012-04-15',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4445,29,'2012-04-15',4,2012,0,0,NULL),
 (4446,30,'2012-04-15',4,2012,0,0,NULL),
 (4447,23,'2012-04-14',4,2012,0,0,NULL),
 (4448,24,'2012-04-14',4,2012,0,0,NULL),
 (4449,25,'2012-04-14',4,2012,0,0,NULL),
 (4450,26,'2012-04-14',4,2012,0,0,NULL),
 (4451,27,'2012-04-14',4,2012,0,0,NULL),
 (4452,28,'2012-04-14',4,2012,0,0,NULL),
 (4453,29,'2012-04-14',4,2012,0,0,NULL),
 (4454,30,'2012-04-14',4,2012,0,0,NULL),
 (4455,23,'2012-04-13',4,2012,0,0,NULL),
 (4456,24,'2012-04-13',4,2012,0,0,NULL),
 (4457,25,'2012-04-13',4,2012,0,0,NULL),
 (4458,26,'2012-04-13',4,2012,0,0,NULL),
 (4459,27,'2012-04-13',4,2012,0,0,NULL),
 (4460,28,'2012-04-13',4,2012,0,0,NULL),
 (4461,29,'2012-04-13',4,2012,0,0,NULL),
 (4462,30,'2012-04-13',4,2012,0,0,NULL),
 (4463,23,'2012-04-12',4,2012,0,0,NULL),
 (4464,24,'2012-04-12',4,2012,0,0,NULL),
 (4465,25,'2012-04-12',4,2012,0,0,NULL),
 (4466,26,'2012-04-12',4,2012,0,0,NULL),
 (4467,27,'2012-04-12',4,2012,0,0,NULL),
 (4468,28,'2012-04-12',4,2012,0,0,NULL),
 (4469,29,'2012-04-12',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4470,30,'2012-04-12',4,2012,0,0,NULL),
 (4471,23,'2012-04-11',4,2012,0,0,NULL),
 (4472,24,'2012-04-11',4,2012,0,0,NULL),
 (4473,25,'2012-04-11',4,2012,0,0,NULL),
 (4474,26,'2012-04-11',4,2012,0,0,NULL),
 (4475,27,'2012-04-11',4,2012,0,0,NULL),
 (4476,28,'2012-04-11',4,2012,0,0,NULL),
 (4477,29,'2012-04-11',4,2012,0,0,NULL),
 (4478,30,'2012-04-11',4,2012,0,0,NULL),
 (4479,23,'2012-04-10',4,2012,0,0,NULL),
 (4480,24,'2012-04-10',4,2012,0,0,NULL),
 (4481,25,'2012-04-10',4,2012,0,0,NULL),
 (4482,26,'2012-04-10',4,2012,0,0,NULL),
 (4483,27,'2012-04-10',4,2012,0,0,NULL),
 (4484,28,'2012-04-10',4,2012,0,0,NULL),
 (4485,29,'2012-04-10',4,2012,0,0,NULL),
 (4486,30,'2012-04-10',4,2012,0,0,NULL),
 (4487,23,'2012-04-09',4,2012,0,0,NULL),
 (4488,24,'2012-04-09',4,2012,0,0,NULL),
 (4489,25,'2012-04-09',4,2012,0,0,NULL),
 (4490,26,'2012-04-09',4,2012,0,0,NULL),
 (4491,27,'2012-04-09',4,2012,0,0,NULL),
 (4492,28,'2012-04-09',4,2012,0,0,NULL),
 (4493,29,'2012-04-09',4,2012,0,0,NULL),
 (4494,30,'2012-04-09',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4495,23,'2012-04-08',4,2012,0,0,NULL),
 (4496,24,'2012-04-08',4,2012,0,0,NULL),
 (4497,25,'2012-04-08',4,2012,0,0,NULL),
 (4498,26,'2012-04-08',4,2012,0,0,NULL),
 (4499,27,'2012-04-08',4,2012,0,0,NULL),
 (4500,28,'2012-04-08',4,2012,0,0,NULL),
 (4501,29,'2012-04-08',4,2012,0,0,NULL),
 (4502,30,'2012-04-08',4,2012,0,0,NULL),
 (4503,23,'2012-04-07',4,2012,0,0,NULL),
 (4504,24,'2012-04-07',4,2012,0,0,NULL),
 (4505,25,'2012-04-07',4,2012,0,0,NULL),
 (4506,26,'2012-04-07',4,2012,0,0,NULL),
 (4507,27,'2012-04-07',4,2012,0,0,NULL),
 (4508,28,'2012-04-07',4,2012,0,0,NULL),
 (4509,29,'2012-04-07',4,2012,0,0,NULL),
 (4510,30,'2012-04-07',4,2012,0,0,NULL),
 (4511,23,'2012-04-06',4,2012,0,0,NULL),
 (4512,24,'2012-04-06',4,2012,0,0,NULL),
 (4513,25,'2012-04-06',4,2012,0,0,NULL),
 (4514,26,'2012-04-06',4,2012,0,0,NULL),
 (4515,27,'2012-04-06',4,2012,0,0,NULL),
 (4516,28,'2012-04-06',4,2012,0,0,NULL),
 (4517,29,'2012-04-06',4,2012,0,0,NULL),
 (4518,30,'2012-04-06',4,2012,0,0,NULL),
 (4519,23,'2012-04-05',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4520,24,'2012-04-05',4,2012,0,0,NULL),
 (4521,25,'2012-04-05',4,2012,0,0,NULL),
 (4522,26,'2012-04-05',4,2012,0,0,NULL),
 (4523,27,'2012-04-05',4,2012,0,0,NULL),
 (4524,28,'2012-04-05',4,2012,0,0,NULL),
 (4525,29,'2012-04-05',4,2012,0,0,NULL),
 (4526,30,'2012-04-05',4,2012,0,0,NULL),
 (4527,23,'2012-04-04',4,2012,0,0,NULL),
 (4528,24,'2012-04-04',4,2012,0,0,NULL),
 (4529,25,'2012-04-04',4,2012,0,0,NULL),
 (4530,26,'2012-04-04',4,2012,0,0,NULL),
 (4531,27,'2012-04-04',4,2012,0,0,NULL),
 (4532,28,'2012-04-04',4,2012,0,0,NULL),
 (4533,29,'2012-04-04',4,2012,0,0,NULL),
 (4534,30,'2012-04-04',4,2012,0,0,NULL),
 (4535,23,'2012-04-03',4,2012,0,0,NULL),
 (4536,24,'2012-04-03',4,2012,0,0,NULL),
 (4537,25,'2012-04-03',4,2012,0,0,NULL),
 (4538,26,'2012-04-03',4,2012,0,0,NULL),
 (4539,27,'2012-04-03',4,2012,0,0,NULL),
 (4540,28,'2012-04-03',4,2012,0,0,NULL),
 (4541,29,'2012-04-03',4,2012,0,0,NULL),
 (4542,30,'2012-04-03',4,2012,0,0,NULL),
 (4543,23,'2012-04-02',4,2012,0,0,NULL),
 (4544,24,'2012-04-02',4,2012,0,0,NULL);
INSERT INTO `cardservice`.`compare_issuer` VALUES  (4545,25,'2012-04-02',4,2012,0,0,NULL),
 (4546,26,'2012-04-02',4,2012,0,0,NULL),
 (4547,27,'2012-04-02',4,2012,0,0,NULL),
 (4548,28,'2012-04-02',4,2012,0,0,NULL),
 (4549,29,'2012-04-02',4,2012,0,0,NULL),
 (4550,30,'2012-04-02',4,2012,0,0,NULL),
 (4551,23,'2012-04-01',4,2012,0,0,NULL),
 (4552,24,'2012-04-01',4,2012,0,0,NULL),
 (4553,25,'2012-04-01',4,2012,0,0,NULL),
 (4554,26,'2012-04-01',4,2012,0,0,NULL),
 (4555,27,'2012-04-01',4,2012,0,0,NULL),
 (4556,28,'2012-04-01',4,2012,0,0,NULL),
 (4557,29,'2012-04-01',4,2012,0,0,NULL),
 (4558,30,'2012-04-01',4,2012,0,0,NULL);
CREATE TABLE  `cardservice`.`compare_partner` (
  `comparePartnerId` int(11) NOT NULL auto_increment,
  `paymentId` int(11) default NULL,
  `amount` int(11) default NULL,
  `originalVolume` int(11) default NULL,
  `vietpayVolume` int(11) default NULL,
  `partnerVolume` int(11) default NULL,
  PRIMARY KEY  (`comparePartnerId`),
  KEY `idx_partnerId_month_year` (`amount`),
  KEY `fk_compare_partner_payment` (`paymentId`),
  CONSTRAINT `fk_compare_partner_payment` FOREIGN KEY (`paymentId`) REFERENCES `payment` (`paymentId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=6126 DEFAULT CHARSET=utf8;
CREATE TABLE  `cardservice`.`contract` (
  `contractId` int(11) NOT NULL auto_increment,
  `partnerId` int(11) NOT NULL,
  `paymentPeriodId` int(11) NOT NULL,
  `contractNumber` varchar(50) NOT NULL,
  `paymentPeriodAmount` int(11) NOT NULL,
  `createDate` date NOT NULL,
  `startPeriodDate` date default NULL,
  `endPeriodDate` date default NULL,
  `fromDate` date default NULL,
  `toDate` date default NULL,
  `expireDate` date default NULL,
  `maxCompareDay` int(11) NOT NULL default '0',
  `maxPaymentDay` int(11) NOT NULL default '0',
  `status` int(11) NOT NULL default '0',
  `startChoice` int(11) default NULL,
  `version` int(11) default NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  `paymentMethod` int(11) default '0',
  `compareChoice` int(11) default '1' COMMENT '1 : Vietpay lam goc, 0: khach hang lam goc',
  PRIMARY KEY  (`contractId`),
  KEY `fk_contract_partner` (`partnerId`),
  KEY `fk_contract_paymentperiod` (`paymentPeriodId`),
  CONSTRAINT `fk_contract_partner` FOREIGN KEY (`partnerId`) REFERENCES `partner` (`partnerId`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_contract_paymentperiod` FOREIGN KEY (`paymentPeriodId`) REFERENCES `paymentperiod` (`paymentPeriodId`)
) ENGINE=InnoDB AUTO_INCREMENT=165 DEFAULT CHARSET=utf8;
INSERT INTO `cardservice`.`contract` VALUES  (1,11,1,'37/GSM-VIETPAY/MOBICARD-2011',1,'2011-09-05',NULL,NULL,'2011-04-01','2012-04-01','2011-11-30',15,20,2,1,1,'2011-12-06 06:36:13',0,1),
 (7,17,1,'083/2011-VIETPAY/MOBICARD',1,'2011-09-05',NULL,NULL,'2011-05-25','2012-05-25','2011-11-30',15,20,2,1,1,'2011-12-06 07:11:33',0,1),
 (8,26,1,'007/AULAC-VIETPAY/MOBICARD',1,'2011-09-05',NULL,NULL,'2011-06-01','2012-06-01','2011-11-30',15,20,2,1,1,'2011-12-06 06:33:39',0,1),
 (9,19,1,'07062011/lLINHTAM-VIETPAY/MOBICARD',1,'2011-09-05','2012-04-01','2012-04-30','2011-06-07','2012-06-07','2012-06-07',15,20,1,1,1,'2012-04-01 04:00:00',0,1),
 (10,25,1,'160611/HDHT-VIETPAY/MOBICARD/SG',1,'2011-09-05',NULL,NULL,'2011-06-16','2012-06-16','2011-11-30',15,20,2,1,1,'2011-12-06 07:10:23',0,1),
 (11,36,1,'280611/VP-ASP-VIETPAY/MOBICARD',1,'2011-09-05',NULL,NULL,'2011-06-28','2012-06-28','2011-11-30',15,20,2,1,1,'2011-12-06 07:13:18',0,1),
 (12,3,1,'0207-2011/GTDD-VIETPAY/HDDV',1,'2011-09-05',NULL,NULL,'2011-07-01','2012-07-01','2011-11-30',15,20,2,1,1,'2011-12-06 07:05:46',0,1),
 (13,132,1,'01092011/TD-VIETPAY/HDDV',1,'2011-09-05',NULL,NULL,'2011-09-01','2012-09-01','2011-08-31',15,20,2,1,1,'2011-11-29 10:39:58',0,1);
INSERT INTO `cardservice`.`contract` VALUES  (14,136,1,'01092011/VNPT EPAY-VIETPAY/HDDV',1,'2011-09-05',NULL,NULL,'2011-09-01','2012-09-01','2011-08-31',15,20,2,1,1,'2011-11-29 10:39:58',0,1),
 (16,23,1,'28072011/PEACESOFT-VIETPAY/MOBICARD',1,'2011-09-05',NULL,NULL,'2011-07-28','2012-07-28','2011-11-30',15,20,2,1,1,'2011-12-06 07:09:19',0,1),
 (17,30,1,'2806/2011-VIETPAY/MOBICARD',1,'2011-09-05',NULL,NULL,'2011-06-28','2012-06-28','2011-09-30',15,20,2,1,1,'2011-11-29 10:39:58',0,1),
 (18,21,1,'07072011/CMC-VIETPAY/MOBICARD',1,'2011-09-05',NULL,NULL,'2011-07-07','2012-07-07','2011-11-30',15,20,2,1,1,'2011-12-06 06:34:57',0,1),
 (19,24,1,'07072011SGT-VIETPAY/MOBICARD',1,'2011-09-05',NULL,NULL,'2011-07-07','2012-07-07','2011-11-30',15,20,2,1,1,'2011-12-06 07:09:51',0,1),
 (20,118,1,'012011/QUANTUM-VIETPAY/HDDV',1,'2011-09-05',NULL,NULL,'2011-08-01','2012-08-01','2011-11-30',15,20,2,1,1,'2011-12-06 07:07:14',0,1),
 (21,27,1,'07072011/Baokim-Vietpay/Mobicard',1,'2011-09-05','2012-04-01','2012-04-30','2011-07-07','2012-07-07','2012-07-07',15,20,1,1,1,'2012-04-01 04:00:00',0,1),
 (23,119,1,'01092011/GATE-VIETPAY/HDDV',1,'2011-09-05',NULL,NULL,'2011-09-01','2012-09-01','2011-08-31',15,20,2,1,1,'2011-11-29 10:39:58',0,1);
INSERT INTO `cardservice`.`contract` VALUES  (24,129,1,'03-HD/HOA BINH-VIETPAY/HDDV',1,'2011-09-06',NULL,NULL,'2011-08-08','2012-08-08','2011-11-30',15,20,2,1,1,'2011-12-06 06:35:56',0,1),
 (25,135,1,'25082011/NCT-VIETPAY/HDDV',1,'2011-09-06',NULL,NULL,'2011-08-25','2012-08-25','2011-11-30',15,20,2,1,1,'2011-12-06 07:08:39',0,1),
 (26,133,1,'01092011/ISDS- VIETPAY/HDDV',1,'2011-09-07',NULL,NULL,'2011-09-01','2012-09-01','2011-11-30',15,20,2,1,1,'2011-12-06 07:04:37',0,1),
 (27,132,1,'01092011/TD-VIETPAY/HDDV',1,'2011-09-15',NULL,NULL,'2011-08-01','2012-09-01','2011-11-30',15,20,2,1,2,'2011-12-06 07:13:48',0,1),
 (29,137,1,'01092011/SOUTHTELECOM-VIETPAY/HDDV',1,'2011-09-21',NULL,NULL,'2011-09-21','2012-09-21','2011-11-30',15,20,2,1,1,'2011-12-06 07:12:34',0,1),
 (30,128,1,'.',1,'2011-09-21',NULL,NULL,'2011-08-10','2012-08-10','2011-11-30',15,20,2,1,1,'2011-12-06 07:05:33',0,1),
 (31,121,1,'.',1,'2011-09-21',NULL,NULL,'2011-08-05','2012-08-05','2011-12-31',15,20,2,1,2,'2012-01-19 14:47:32',0,1),
 (32,136,1,'01092011/VNPT EPAY-VIETPAY/HDDV',1,'2011-09-23',NULL,NULL,'2011-09-01','2012-09-01','2011-11-30',15,20,2,1,2,'2011-12-06 07:14:13',0,1);
INSERT INTO `cardservice`.`contract` VALUES  (33,119,1,'01092011/GATE-VIETPAY/HDDV',1,'2011-09-23',NULL,NULL,'2011-09-01','2012-09-01','2011-11-30',15,20,2,1,2,'2011-12-06 06:35:12',0,1),
 (35,141,1,'26092011',1,'2011-10-01','2011-11-01','2011-11-30','2011-10-01','2011-11-30','2011-11-30',15,20,2,1,1,'2011-12-06 02:19:00',0,1),
 (36,146,1,'20092011',1,'2011-10-02',NULL,NULL,'2011-10-02','2012-10-02','2012-01-31',15,20,2,1,1,'2012-02-02 10:02:30',0,1),
 (37,140,1,'15092011',1,'2011-10-02',NULL,NULL,'2011-09-15','2012-09-15','2011-09-14',15,20,2,1,1,'2011-12-06 07:06:35',NULL,1),
 (38,139,1,'18092011',1,'2011-10-02',NULL,NULL,'2011-09-18','2012-10-18','2011-09-17',15,20,2,1,1,'2011-12-06 07:15:03',NULL,1),
 (44,147,1,'26092011',1,'2011-10-07',NULL,NULL,'2011-09-26','2012-09-26','2011-09-30',15,20,2,1,2,'2011-11-29 10:39:58',0,1),
 (45,148,1,'01102011',1,'2011-10-07',NULL,NULL,'2011-10-01','2012-10-01','2011-11-30',15,20,2,1,1,'2011-12-06 07:08:17',1,1),
 (46,147,1,'26092011',1,'2011-10-07',NULL,NULL,'2011-09-26','2012-09-26','2011-11-30',15,20,2,1,3,'2011-12-06 07:08:55',1,1),
 (47,30,1,'2806/2011-VIETPAY/MOBICARD',1,'2011-10-08',NULL,NULL,'2011-06-28','2012-06-28','2011-09-30',15,20,2,1,2,'2011-11-29 10:39:58',0,1);
INSERT INTO `cardservice`.`contract` VALUES  (48,30,1,'2806/2011-VIETPAY/MOBICARD',1,'2011-10-08',NULL,NULL,'2011-06-28','2012-06-28',NULL,15,20,2,1,NULL,'2011-11-29 10:39:58',0,1),
 (49,30,1,'2806/2011-VIETPAY/MOBICARD',1,'2011-10-08',NULL,NULL,'2011-06-28','2012-06-28',NULL,15,20,2,1,NULL,'2011-11-29 10:39:58',0,1),
 (50,30,1,'2806/2011-VIETPAY/MOBICARD',1,'2011-10-08',NULL,NULL,'2011-06-28','2012-06-28','2011-11-30',15,20,2,1,3,'2011-12-06 07:12:51',0,1),
 (51,151,1,'20102011',1,'2011-10-22',NULL,NULL,'2011-10-20','2012-10-20','2012-01-31',15,20,2,1,1,'2012-02-16 19:32:06',0,1),
 (52,152,1,'01102011',1,'2011-10-26','2012-04-01','2012-04-30','2011-10-26','2012-10-26','2012-10-26',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (53,32,1,'test',1,'2011-10-31',NULL,NULL,'2011-10-31','2012-10-31','2011-10-30',15,20,2,1,1,'2011-11-29 10:39:58',0,1),
 (54,32,1,'test1',1,'2011-10-31',NULL,NULL,'2011-10-31','2012-10-31','2011-10-30',15,20,2,1,1,'2011-11-29 10:39:58',0,1),
 (55,32,1,'test1',1,'2011-10-31','2011-10-31','2011-10-31','2011-10-31','2011-10-31','2011-10-31',15,20,2,1,2,'2011-11-29 10:39:58',0,1),
 (56,157,1,'25102011',1,'2011-11-01',NULL,NULL,'2011-10-25','2012-11-25','2011-11-30',15,20,2,1,1,'2011-12-06 07:06:21',1,1);
INSERT INTO `cardservice`.`contract` VALUES  (57,32,2,'test',1,'2011-11-02',NULL,NULL,'2011-11-02','2011-11-02','2011-10-31',1,1,2,1,2,'2011-11-29 10:39:58',0,1),
 (58,32,2,'test1',1,'2011-11-02','2011-11-01','2011-11-06','2011-11-02','2011-11-02','2011-11-02',1,1,2,1,3,'2011-11-29 10:39:58',0,1),
 (59,154,1,'15102011',1,'2011-11-07',NULL,NULL,'2011-10-15','2012-10-15','2011-11-30',15,20,2,1,1,'2011-12-06 07:14:51',1,1),
 (66,141,1,'26092011',1,'2011-12-05',NULL,NULL,'2011-12-01','2012-12-31','2011-11-30',15,20,2,1,4,'2011-12-06 07:15:15',0,1),
 (85,26,1,'007/AULAC-VIETPAY/MOBICARD',1,'2011-12-06','2012-04-01','2012-04-30','2011-06-01','2012-06-01','2012-06-01',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (86,21,1,'07072011/CMC-VIETPAY/MOBICARD',1,'2011-12-06','2012-04-01','2012-04-30','2011-07-07','2012-07-07','2012-07-07',15,20,1,1,2,'2012-04-01 04:00:00',0,1),
 (87,119,1,'01092011/GATE-VIETPAY/HDDV',1,'2011-12-06','2012-04-01','2012-04-30','2011-09-01','2012-09-01','2012-09-01',15,20,1,1,3,'2012-04-01 04:00:00',1,1),
 (88,129,1,'03-HD/HOA BINH-VIETPAY/HDDV',1,'2011-12-06','2012-04-01','2012-04-30','2011-08-08','2012-08-08','2012-08-08',15,20,1,1,2,'2012-04-01 04:00:00',1,1);
INSERT INTO `cardservice`.`contract` VALUES  (89,11,1,'37/GSM-VIETPAY/MOBICARD-2011',1,'2011-12-06',NULL,NULL,'2011-04-01','2012-04-01','2012-01-31',15,20,2,1,2,'2012-02-20 11:09:47',1,1),
 (90,133,1,'01092011/ISDS- VIETPAY/HDDV',1,'2011-12-06','2012-04-01','2012-04-30','2011-09-01','2012-09-01','2012-09-01',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (91,128,1,'.',1,'2011-12-06','2012-04-01','2012-04-30','2011-08-10','2012-08-10','2012-08-10',15,20,1,1,3,'2012-04-01 04:00:00',0,1),
 (92,3,1,'0207-2011/GTDD-VIETPAY/HDDV',1,'2011-12-06','2012-04-01','2012-04-30','2011-07-01','2012-07-01','2012-07-01',15,20,1,1,2,'2012-04-01 04:00:00',0,1),
 (93,157,1,'25102011',1,'2011-12-06',NULL,NULL,'2011-10-25','2012-11-25','2012-01-31',15,20,2,1,2,'2012-02-07 11:15:44',1,1),
 (94,140,1,'15092011',1,'2011-12-06','2012-04-01','2012-04-30','2011-09-15','2012-09-15','2012-09-15',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (95,118,1,'012011/QUANTUM-VIETPAY/HDDV',1,'2011-12-06','2012-04-01','2012-04-30','2011-08-01','2012-08-01','2012-08-01',15,20,1,1,2,'2012-04-01 04:00:00',0,1),
 (96,148,1,'01102011',1,'2011-12-06',NULL,NULL,'2011-10-01','2012-10-01','2012-01-31',15,20,2,1,3,'2012-02-07 11:13:39',1,1);
INSERT INTO `cardservice`.`contract` VALUES  (97,135,1,'25082011/NCT-VIETPAY/HDDV',1,'2011-12-06','2012-04-01','2012-04-30','2011-08-25','2012-08-25','2012-08-25',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (98,147,1,'26092011',1,'2011-12-06',NULL,NULL,'2011-09-26','2012-09-26','2012-01-31',15,20,2,1,5,'2012-02-17 09:31:45',1,1),
 (99,23,1,'28072011/PEACESOFT-VIETPAY/MOBICARD',1,'2011-12-06','2012-04-01','2012-04-30','2011-07-28','2012-07-28','2012-07-28',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (100,24,1,'07072011SGT-VIETPAY/MOBICARD',1,'2011-12-06','2012-04-01','2012-04-30','2011-07-07','2012-07-07','2012-07-07',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (101,25,1,'160611/HDHT-VIETPAY/MOBICARD/SG',1,'2011-12-06',NULL,NULL,'2011-06-16','2012-06-16','2011-11-30',15,20,2,1,2,'2011-12-07 07:11:18',1,1),
 (102,17,1,'083/2011-VIETPAY/MOBICARD',1,'2011-12-06',NULL,NULL,'2011-05-25','2012-05-25','2012-01-31',15,20,2,1,2,'2012-02-20 11:11:53',0,1),
 (103,159,1,'Socbay01',1,'2011-12-06','2012-04-01','2012-04-30','2011-11-01','2013-11-30','2013-11-30',15,20,1,1,1,'2012-04-01 04:00:00',1,1),
 (104,137,1,'01092011/SOUTHTELECOM-VIETPAY/HDDV',1,'2011-12-06','2012-04-01','2012-04-30','2011-09-21','2012-09-21','2012-09-21',15,20,1,1,2,'2012-04-01 04:00:00',1,1);
INSERT INTO `cardservice`.`contract` VALUES  (105,30,1,'2806/2011-VIETPAY/MOBICARD',1,'2011-12-06',NULL,NULL,'2011-06-28','2012-06-28','2011-12-31',15,20,2,1,4,'2012-01-18 09:14:38',0,1),
 (106,36,1,'280611/VP-ASP-VIETPAY/MOBICARD',1,'2011-12-06','2012-04-01','2012-04-30','2011-06-28','2012-06-28','2012-06-28',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (107,132,1,'01092011/TD-VIETPAY/HDDV',1,'2011-12-06',NULL,NULL,'2011-08-01','2012-09-01','2012-01-31',15,20,2,1,3,'2012-02-02 10:04:58',1,1),
 (108,136,1,'01092011/VNPT EPAY-VIETPAY/HDDV',1,'2011-12-06',NULL,NULL,'2011-09-01','2012-09-01','2012-01-31',15,20,2,1,3,'2012-02-07 11:11:47',1,1),
 (109,154,1,'15102011',1,'2011-12-06','2012-04-01','2012-04-30','2011-10-15','2012-10-15','2012-10-15',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (110,139,1,'18092011',1,'2011-12-06','2012-04-01','2012-04-30','2011-09-18','2012-10-18','2012-10-18',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (111,141,1,'26092011',1,'2011-12-06','2012-04-01','2012-04-30','2011-12-01','2012-12-31','2012-12-31',15,20,1,1,6,'2012-04-01 04:00:00',0,1),
 (112,25,1,'160611/HDHT-VIETPAY/MOBICARD/SG',1,'2011-12-07',NULL,NULL,'2011-06-16','2012-06-16','2011-11-30',15,20,2,1,3,'2011-12-09 03:01:14',1,1);
INSERT INTO `cardservice`.`contract` VALUES  (113,25,1,'160611/HDHT-VIETPAY/MOBICARD/SG',1,'2011-12-09',NULL,NULL,'2011-06-16','2012-06-16','2012-01-31',15,20,2,1,4,'2012-02-23 13:49:44',1,1),
 (114,25,1,'01112011/HĐHT-VIETPAY/VINACARD/SG',1,'2011-12-09',NULL,NULL,'2011-11-01','2012-11-30','2011-11-30',15,20,2,1,1,'2011-12-09 03:26:49',1,1),
 (115,25,1,'01112011/HĐHT-VIETPAY/VINACARD/SG',1,'2011-12-09',NULL,NULL,'2011-11-01','2012-11-30','2012-01-31',15,20,2,1,2,'2012-02-23 13:49:44',1,1),
 (116,155,1,'26082011/MCGAME-VIETPAY/HĐDV',1,'2011-12-09','2012-04-01','2012-04-30','2011-08-26','2012-09-26','2012-09-26',15,20,1,1,1,'2012-04-01 04:00:00',0,1),
 (117,39,1,'072011',1,'2011-12-14','2012-04-01','2012-04-30','2011-07-01','2012-07-01','2012-07-01',15,20,1,1,1,'2012-04-01 04:00:00',0,1),
 (118,153,1,'260911/SUNNET-VIETPAY/HDDV',1,'2011-12-14',NULL,NULL,'2011-09-01','2012-09-30','2012-02-29',15,20,2,1,1,'2012-03-23 09:02:04',1,1),
 (122,161,1,'0112011/NEO-VIETPAY/HDDV',1,'2011-12-23',NULL,NULL,'2011-11-01','2012-11-30','2012-01-31',15,20,2,1,1,'2012-02-03 10:19:27',1,1),
 (124,163,1,'01122011SSGAME1',1,'2012-01-06',NULL,NULL,'2011-12-01','2012-12-01','2012-01-31',15,20,2,1,1,'2012-02-08 11:19:24',0,1);
INSERT INTO `cardservice`.`contract` VALUES  (125,162,1,'01122011SSGAME',1,'2012-01-06',NULL,NULL,'2011-12-01','2012-12-01','2012-01-31',15,20,2,1,1,'2012-02-08 11:22:02',0,1),
 (128,193,1,'01012012',1,'2012-01-16','2012-01-01','2012-01-31','2012-01-01','2012-01-16','2012-01-16',15,20,2,1,1,'2012-02-01 04:00:01',0,1),
 (129,30,1,'2806/2011-VIETPAY/MOBICARD',1,'2012-01-18',NULL,NULL,'2011-06-28','2012-06-28','2011-12-31',15,20,2,1,5,'2012-01-18 09:15:15',0,1),
 (130,30,1,'2806/2011-VIETPAY/MOBICARD',1,'2012-01-18','2012-04-01','2012-04-30','2011-06-28','2012-06-28','2012-06-28',15,20,1,1,6,'2012-04-01 04:00:00',0,1),
 (131,121,1,'.',1,'2012-01-19',NULL,NULL,'2011-08-05','2012-08-05','2012-01-31',15,20,2,1,4,'2012-02-23 10:25:13',0,1),
 (132,191,1,'01012012',1,'2012-02-02',NULL,NULL,'2012-01-01','2013-01-01','2011-12-31',15,20,2,1,2,'2012-02-02 09:59:31',0,1),
 (133,158,1,'01012012',1,'2012-02-02','2012-04-01','2012-04-30','2012-01-01','2013-01-01','2013-01-01',15,20,1,1,3,'2012-04-01 04:00:00',1,1),
 (134,191,1,'01012012',1,'2012-02-02','2012-04-01','2012-04-30','2012-01-01','2013-01-01','2013-01-01',15,20,1,1,4,'2012-04-01 04:00:00',0,1);
INSERT INTO `cardservice`.`contract` VALUES  (135,146,1,'20092011',1,'2012-02-02',NULL,NULL,'2011-10-02','2012-10-02','2012-01-31',15,20,2,1,2,'2012-02-07 11:16:14',0,1),
 (136,132,1,'01092011/TD-VIETPAY/HDDV',1,'2012-02-02',NULL,NULL,'2011-08-01','2012-09-01','2012-01-31',15,20,2,1,4,'2012-02-07 11:06:02',1,1),
 (137,161,1,'0112011/NEO-VIETPAY/HDDV',1,'2012-02-03',NULL,NULL,'2011-11-01','2012-11-30','2012-01-31',15,20,2,1,2,'2012-02-03 16:51:46',1,1),
 (138,161,1,'0112011/NEO-VIETPAY/HDDV',1,'2012-02-03',NULL,NULL,'2011-11-01','2012-11-30','2012-01-31',15,20,2,1,3,'2012-02-07 11:13:05',1,1),
 (139,132,1,'01092011/TD-VIETPAY/HDDV',1,'2012-02-07','2012-04-01','2012-04-30','2012-01-01','2012-12-31','2012-12-31',15,20,1,1,5,'2012-04-01 04:00:00',1,1),
 (140,136,1,'01092011/VNPT EPAY-VIETPAY/HDDV',1,'2012-02-07',NULL,NULL,'2012-01-01','2012-12-31','2012-01-31',15,20,2,1,4,'2012-02-23 13:51:22',1,1),
 (141,161,1,'0112011/NEO-VIETPAY/HDDV',1,'2012-02-07','2012-04-01','2012-04-30','2012-01-01','2012-12-31','2012-12-31',15,20,1,1,4,'2012-04-01 04:00:00',1,1),
 (142,148,1,'01102011',1,'2012-02-07','2012-04-01','2012-04-30','2012-01-01','2012-12-31','2012-12-31',15,20,1,1,4,'2012-04-01 04:00:00',1,1);
INSERT INTO `cardservice`.`contract` VALUES  (143,157,1,'25102011',1,'2012-02-07','2012-04-01','2012-04-30','2012-01-01','2012-12-31','2012-12-31',15,20,1,1,3,'2012-04-01 04:00:00',1,1),
 (144,146,1,'20092011',1,'2012-02-07','2012-04-01','2012-04-30','2012-01-01','2012-12-31','2012-12-31',15,20,1,1,3,'2012-04-01 04:00:00',0,1),
 (146,193,1,'01012012',1,'2012-02-08','2012-04-01','2012-04-30','2012-01-01','2012-12-31','2012-12-31',15,20,1,1,5,'2012-04-01 04:00:00',0,1),
 (147,222,1,'01022012',1,'2012-02-08','2012-04-01','2012-04-30','2012-02-01','2012-12-31','2012-12-31',15,20,1,1,1,'2012-04-01 04:00:00',0,1),
 (148,163,1,'01122011SSGAME1',1,'2012-02-08','2012-04-01','2012-04-30','2011-12-01','2012-12-01','2012-12-01',15,20,1,1,2,'2012-04-01 04:00:00',0,1),
 (149,162,1,'01122011SSGAME',1,'2012-02-08','2012-04-01','2012-04-30','2011-12-01','2012-12-01','2012-12-01',15,20,1,1,2,'2012-04-01 04:00:00',0,1),
 (150,223,1,'HA01022012',1,'2012-02-08','2012-04-01','2012-04-30','2012-02-01','2013-02-28','2013-02-28',15,20,1,1,1,'2012-04-01 04:00:00',0,1),
 (151,151,1,'20102011',1,'2012-02-16',NULL,NULL,'2011-10-20','2012-10-20','2012-02-29',15,20,2,1,2,'2012-03-23 08:57:46',0,1);
INSERT INTO `cardservice`.`contract` VALUES  (152,147,1,'26092011',1,'2012-02-17','2012-04-01','2012-04-30','2011-09-26','2012-09-26','2012-09-26',15,20,1,1,7,'2012-04-01 04:00:00',1,1),
 (153,11,1,'37/GSM-VIETPAY/MOBICARD-2011',1,'2012-02-20',NULL,NULL,'2011-04-01','2012-04-01','2012-01-31',15,20,2,1,3,'2012-02-20 11:10:21',1,1),
 (154,11,1,'37/GSM-VIETPAY/MOBICARD-2011',1,'2012-02-20','2012-04-01','2012-04-30','2012-01-01','2013-01-01','2013-01-01',15,20,1,1,4,'2012-04-01 04:00:00',1,1),
 (155,17,1,'083/2011-VIETPAY/MOBICARD',1,'2012-02-20','2012-04-01','2012-04-30','2012-01-01','2013-01-01','2013-01-01',15,20,1,1,3,'2012-04-01 04:00:00',0,1),
 (156,182,1,'01022012',1,'2012-02-22','2012-04-01','2012-04-30','2012-02-01','2013-02-01','2013-02-01',15,20,1,1,2,'2012-04-01 04:00:00',1,1),
 (157,121,1,'.',1,'2012-02-23','2012-04-01','2012-04-30','2011-08-05','2012-08-05','2012-08-05',15,20,1,1,5,'2012-04-01 04:00:00',0,1),
 (158,25,1,'160611/HDHT-VIETPAY/MOBICARD/SG',1,'2012-02-23',NULL,NULL,'2011-06-16','2012-06-16','2012-01-31',15,20,2,1,5,'2012-02-23 13:50:08',1,1),
 (159,25,1,'160611/HDHT-VIETPAY/MOBICARD/SG',1,'2012-02-23','2012-04-01','2012-04-30','2011-06-16','2012-06-16','2012-06-16',15,20,1,1,6,'2012-04-01 04:00:00',1,1);
INSERT INTO `cardservice`.`contract` VALUES  (160,136,1,'01092011/VNPT EPAY-VIETPAY/HDDV',1,'2012-02-23',NULL,NULL,'2012-01-01','2012-12-31','2012-01-31',15,20,2,1,5,'2012-02-23 13:53:42',1,1),
 (161,136,1,'01092011/VNPT EPAY-VIETPAY/HDDV',1,'2012-02-23','2012-04-01','2012-04-30','2012-01-01','2012-12-31','2012-12-31',15,20,1,1,6,'2012-04-01 04:00:00',1,1),
 (162,151,1,'20102011',1,'2012-03-23',NULL,NULL,'2011-10-20','2012-03-31','2012-02-29',15,20,2,1,3,'2012-03-23 08:59:53',0,1),
 (163,151,1,'123PAY/VIETPAY',1,'2012-03-23','2012-04-01','2012-04-30','2012-02-01','2013-02-01','2013-02-01',15,20,1,1,1,'2012-04-01 04:00:00',0,1),
 (164,153,1,'260911/SUNNET-VIETPAY/HDDV',1,'2012-03-23','2012-04-01','2012-04-30','2011-09-01','2012-09-30','2012-09-30',15,20,1,1,2,'2012-04-01 04:00:00',1,1);

DELIMITER $$

CREATE DEFINER = `root`@`%` TRIGGER  `cardservice`.`insert_contract` BEFORE INSERT ON `contract` FOR EACH ROW BEGIN
	DECLARE	newVersion INT;	
IF (NEW.status = 1) THEN
	SELECT max(version) INTO newVersion FROM contract 					
		WHERE contractNumber = NEW.contractNumber;		
	IF (newVersion is null) THEN
		SET NEW.version = 1;	
	ELSE		 
		SET NEW.version = newVersion + 1; 					
	END IF;	
END IF;      	
END $$

DELIMITER ;

DELIMITER $$

CREATE DEFINER = `root`@`%` TRIGGER  `cardservice`.`update_contract` BEFORE UPDATE ON `contract` FOR EACH ROW BEGIN
	DECLARE	newVersion INT;	
IF (OLD.status = 0 AND NEW.status = 1) THEN
	SELECT max(version) INTO newVersion FROM contract 					
		WHERE contractNumber = NEW.contractNumber;		
	IF (newVersion is null) THEN
		SET newVersion = 1;	
	ELSE		 
		SET newVersion = newVersion + 1; 					
	END IF;	
	SET NEW.version = newVersion; 
END IF;      	
END $$

DELIMITER ;
CREATE TABLE  `cardservice`.`contract_issuer` (
  `contractIssuerId` int(11) NOT NULL auto_increment,
  `contractId` int(11) NOT NULL,
  `issuerId` int(11) NOT NULL,
  PRIMARY KEY  (`contractIssuerId`),
  KEY `fk_contract_issuer_contract` (`contractId`),
  KEY `fk_contract_issuer_issuer` (`issuerId`),
  CONSTRAINT `fk_contract_issuer_contract` FOREIGN KEY (`contractId`) REFERENCES `contract` (`contractId`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_contract_issuer_issuer` FOREIGN KEY (`issuerId`) REFERENCES `issuer` (`issuerId`)
) ENGINE=InnoDB AUTO_INCREMENT=446 DEFAULT CHARSET=utf8;
CREATE TABLE  `cardservice`.`contract_period` (
  `contractPeriodId` int(11) NOT NULL auto_increment,
  `contractId` int(11) default NULL,
  `statusId` int(11) default '1',
  `startPeriodDate` date default NULL,
  `endPeriodDate` date default NULL,
  `originalValue` bigint(20) default '0',
  `value` bigint(20) default '0',
  `income` bigint(20) default '0',
  `compareDate` date default NULL,
  `paymentDate` date default NULL,
  `paymentMethod` int(11) default '0',
  `voucherType` int(11) default NULL,
  `voucherNumber` varchar(50) default NULL,
  `proposalDate` date default NULL,
  `proposalPerson` varchar(50) default NULL,
  `office` varchar(100) default NULL,
  `bankAccountHolder0` varchar(50) default NULL,
  `bankAccount0` varchar(50) default NULL,
  `bankName0` varchar(50) default NULL,
  `bankAddress0` varchar(100) default NULL,
  `bankAccountHolder1` varchar(50) default NULL,
  `bankAccount1` varchar(50) default NULL,
  `bankName1` varchar(50) default NULL,
  `bankAddress1` varchar(100) default NULL,
  `voucherDescription` varchar(100) default NULL,
  `paid` double default '0',
  `progress` float default '0',
  `savedValue` bigint(20) default '0',
  `f1` varchar(100) default NULL,
  `f2` varchar(100) default NULL,
  `f3` varchar(100) default NULL,
  `f4` varchar(100) default NULL,
  `f5` varchar(100) default NULL,
  `f6` varchar(100) default NULL,
  `f7` varchar(100) default NULL,
  `f8` varchar(100) default NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  USING BTREE (`contractPeriodId`)
) ENGINE=InnoDB AUTO_INCREMENT=413 DEFAULT CHARSET=utf8;
CREATE TABLE  `cardservice`.`d_day` (
  `partnerId` int(11) NOT NULL,
  `requestDate` date NOT NULL,
  `cardId` int(11) NOT NULL,
  `volume` int(11) default NULL,
  `value` bigint(20) default NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`partnerId`,`requestDate`,`cardId`),
  KEY `fk_statistic_day_card` (`cardId`),
  KEY `idx_requestDate` (`requestDate`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED;
CREATE TABLE  `cardservice`.`d_hour` (
  `partnerId` int(11) NOT NULL,
  `requestDate` date NOT NULL,
  `hour` int(2) unsigned zerofill NOT NULL default '00',
  `cardId` int(11) NOT NULL,
  `volume` int(11) NOT NULL,
  `value` bigint(20) NOT NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`partnerId`,`requestDate`,`hour`,`cardId`),
  KEY `fk_statistic_hour_card` (`cardId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED;
CREATE TABLE  `cardservice`.`d_month` (
  `partnerId` int(11) NOT NULL,
  `month` int(11) NOT NULL,
  `year` int(11) NOT NULL,
  `cardId` int(11) NOT NULL,
  `volume` int(11) NOT NULL,
  `value` bigint(20) NOT NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`partnerId`,`month`,`year`,`cardId`),
  KEY `fk_cardId` (`cardId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED;
CREATE TABLE  `cardservice`.`fee` (
  `feeId` int(11) NOT NULL auto_increment,
  `contractId` int(11) default NULL,
  `low` bigint(20) NOT NULL default '0',
  `high` bigint(20) default NULL,
  `status` int(11) NOT NULL default '1',
  PRIMARY KEY  (`feeId`),
  KEY `fk_fee_contract` (`contractId`),
  CONSTRAINT `fk_fee_contract` FOREIGN KEY (`contractId`) REFERENCES `contract` (`contractId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=389 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='InnoDB free: 7168 kB; (`partnerId`) REFER `cardservice/';
INSERT INTO `cardservice`.`fee` VALUES  (1,1,0,100,1),
 (2,1,100,200,1),
 (3,1,200,500,1),
 (4,1,500,1500,1),
 (7,1,1500,NULL,1),
 (14,7,0,500,1),
 (15,7,500,1500,1),
 (16,7,1500,NULL,1),
 (17,8,0,100,1),
 (18,8,100,200,1),
 (19,8,200,500,1),
 (20,8,500,1500,1),
 (21,8,1500,NULL,2),
 (22,8,0,NULL,2),
 (23,9,0,100,1),
 (24,9,100,200,1),
 (25,9,200,500,1),
 (26,9,500,1500,1),
 (27,9,1500,NULL,1),
 (28,10,0,100,1),
 (29,10,100,200,1),
 (30,10,200,500,1),
 (31,10,500,1500,1),
 (32,10,1500,NULL,1),
 (33,11,0,NULL,1),
 (34,12,0,500,1),
 (35,12,500,NULL,1),
 (36,13,0,300,1),
 (37,13,300,1500,1),
 (38,13,1500,NULL,1),
 (39,14,0,NULL,1),
 (41,16,0,NULL,1),
 (42,17,0,200,1),
 (43,17,200,NULL,1),
 (44,18,0,100,1),
 (45,19,0,500,1),
 (46,18,100,200,1),
 (47,19,500,1500,1),
 (48,18,200,500,1),
 (49,19,1500,NULL,1),
 (50,18,500,1500,1),
 (51,18,1500,NULL,1),
 (52,20,0,500,1),
 (53,20,500,NULL,1),
 (54,21,0,500,1),
 (55,21,500,NULL,1),
 (58,23,0,5000,1),
 (59,23,5000,NULL,1),
 (60,8,1500,NULL,1),
 (61,24,0,NULL,1),
 (62,25,0,500,1);
INSERT INTO `cardservice`.`fee` VALUES  (63,25,500,NULL,1),
 (64,26,0,500,1),
 (65,26,500,1500,1),
 (66,26,1500,NULL,1),
 (67,27,0,300,1),
 (68,27,300,1500,1),
 (69,27,1500,NULL,1),
 (72,29,0,500,1),
 (73,29,500,1500,1),
 (74,29,1500,NULL,1),
 (75,30,0,500,2),
 (76,30,500,NULL,2),
 (77,30,0,500,1),
 (78,30,500,NULL,1),
 (79,31,0,500,1),
 (80,31,500,NULL,1),
 (81,32,0,NULL,1),
 (82,33,0,5000,1),
 (83,33,5000,NULL,1),
 (84,35,0,NULL,2),
 (85,35,0,NULL,1),
 (87,36,0,400,1),
 (88,36,400,1500,1),
 (89,36,1500,NULL,1),
 (90,37,0,500,1),
 (91,37,500,1500,1),
 (92,37,1500,NULL,1),
 (93,38,0,800,1),
 (94,38,800,1800,1),
 (95,38,1800,NULL,1),
 (100,44,0,NULL,1),
 (101,45,0,NULL,1),
 (102,46,0,NULL,2),
 (103,47,0,200,1),
 (104,47,200,NULL,1),
 (105,47,0,NULL,1),
 (106,48,0,200,1),
 (107,48,200,NULL,1),
 (108,48,0,200,1),
 (109,49,0,200,1),
 (110,49,200,NULL,1),
 (111,50,0,200,2),
 (112,50,200,NULL,2),
 (113,50,0,NULL,2),
 (114,50,0,NULL,1),
 (115,51,0,NULL,1),
 (116,46,0,NULL,2),
 (117,52,0,NULL,2),
 (118,56,0,250,1);
INSERT INTO `cardservice`.`fee` VALUES  (119,56,250,NULL,1),
 (120,46,0,NULL,1),
 (121,59,0,1500,1),
 (122,59,1500,NULL,1),
 (138,66,0,200,2),
 (139,66,200,800,2),
 (140,66,800,NULL,2),
 (141,66,0,200,1),
 (142,66,200,800,1),
 (143,66,800,NULL,1),
 (180,85,0,100,1),
 (181,85,100,200,1),
 (182,85,200,500,1),
 (183,85,500,1500,1),
 (184,85,1500,NULL,1),
 (185,86,0,100,2),
 (186,86,100,200,2),
 (187,86,200,500,2),
 (188,86,500,1500,2),
 (189,86,1500,NULL,2),
 (190,87,0,5000,1),
 (191,87,5000,NULL,1),
 (192,88,0,NULL,1),
 (193,89,0,100,2),
 (194,89,100,200,2),
 (195,89,200,500,2),
 (196,89,500,1500,1),
 (197,89,1500,NULL,1),
 (198,90,0,500,1),
 (199,90,500,1500,1),
 (200,90,1500,NULL,1),
 (201,91,0,500,1),
 (202,91,500,NULL,1),
 (203,92,0,500,1),
 (204,92,500,NULL,1),
 (205,93,0,250,1),
 (206,93,250,NULL,1),
 (207,94,0,500,1),
 (208,94,500,1500,1),
 (209,94,1500,NULL,1),
 (210,95,0,500,2),
 (211,95,500,NULL,2),
 (212,96,0,NULL,2),
 (213,97,0,500,1),
 (214,97,500,NULL,1),
 (215,98,0,NULL,1),
 (216,99,0,NULL,1);
INSERT INTO `cardservice`.`fee` VALUES  (217,100,0,500,1),
 (218,100,500,1500,1),
 (219,100,1500,NULL,1),
 (220,101,0,100,1),
 (221,101,100,200,1),
 (222,101,200,500,1),
 (223,101,500,1500,1),
 (224,101,1500,NULL,1),
 (225,102,0,500,1),
 (226,102,500,1500,1),
 (227,102,1500,NULL,1),
 (228,103,0,100,1),
 (229,103,100,200,1),
 (230,103,200,500,1),
 (231,103,500,1500,1),
 (232,103,1500,900000,1),
 (233,104,0,500,1),
 (234,104,500,1500,1),
 (235,104,1500,NULL,1),
 (236,105,0,NULL,1),
 (237,106,0,NULL,1),
 (238,107,0,300,1),
 (239,107,300,1500,1),
 (240,107,1500,NULL,1),
 (241,108,0,NULL,2),
 (242,109,0,1500,1),
 (243,109,1500,NULL,1),
 (244,110,0,800,1),
 (245,110,800,1800,1),
 (246,110,1800,NULL,1),
 (247,111,0,200,1),
 (248,111,200,800,1),
 (249,111,800,NULL,1),
 (250,112,0,100,2),
 (251,112,100,200,2),
 (252,112,200,500,2),
 (253,112,500,1500,2),
 (254,112,1500,NULL,2),
 (255,112,0,100,1),
 (256,112,100,200,1),
 (257,112,0,NULL,2),
 (258,112,500,NULL,2),
 (259,112,200,500,1),
 (260,112,500,1500,1),
 (261,112,1500,NULL,1);
INSERT INTO `cardservice`.`fee` VALUES  (262,113,0,100,1),
 (263,113,100,200,1),
 (264,113,200,500,1),
 (265,113,500,1500,1),
 (266,113,1500,NULL,1),
 (267,114,0,NULL,1),
 (268,115,0,NULL,1),
 (269,116,0,200,1),
 (270,116,200,800,1),
 (271,116,800,NULL,1),
 (272,117,0,NULL,1),
 (273,118,0,NULL,1),
 (274,122,0,NULL,1),
 (276,124,0,NULL,1),
 (277,125,0,NULL,1),
 (282,128,0,NULL,2),
 (283,128,0,NULL,2),
 (284,129,0,NULL,2),
 (285,129,0,NULL,1),
 (286,130,0,NULL,2),
 (287,131,0,500,2),
 (288,131,500,NULL,2),
 (289,131,0,NULL,1),
 (290,132,0,NULL,2),
 (291,133,0,500,1),
 (292,133,500,NULL,1),
 (293,132,0,NULL,1),
 (294,134,0,NULL,1),
 (295,135,0,400,2),
 (296,135,400,1500,2),
 (297,135,1500,NULL,2),
 (298,135,0,200,1),
 (299,135,200,NULL,1),
 (300,136,0,300,2),
 (301,136,300,1500,2),
 (302,136,1500,NULL,2),
 (303,136,0,500,2),
 (304,136,0,500,1),
 (305,136,500,NULL,1),
 (306,108,0,500,2),
 (307,108,500,NULL,2),
 (308,96,0,200,1),
 (309,96,200,NULL,1),
 (310,137,0,NULL,2),
 (311,137,0,NULL,2),
 (312,108,0,NULL,2);
INSERT INTO `cardservice`.`fee` VALUES  (313,137,0,NULL,1),
 (314,138,0,NULL,1),
 (315,52,0,300,1),
 (316,52,300,800,1),
 (317,52,800,NULL,1),
 (318,108,0,500,1),
 (319,108,500,NULL,1),
 (320,86,0,NULL,1),
 (321,139,0,500,1),
 (322,139,500,NULL,1),
 (323,140,0,500,1),
 (324,140,500,NULL,1),
 (325,141,0,NULL,1),
 (326,142,0,200,1),
 (327,142,200,NULL,1),
 (328,143,0,250,1),
 (329,143,250,NULL,1),
 (330,144,0,200,1),
 (331,144,200,NULL,1),
 (332,128,0,NULL,1),
 (333,146,0,NULL,1),
 (334,147,0,NULL,2),
 (335,147,0,NULL,1),
 (336,148,0,NULL,2),
 (337,148,0,NULL,1),
 (338,149,0,NULL,2),
 (339,149,0,NULL,1),
 (340,150,0,200,1),
 (341,150,200,1000,1),
 (342,150,1000,NULL,1),
 (343,151,0,NULL,2),
 (344,151,0,NULL,1),
 (345,152,0,NULL,2),
 (346,152,0,NULL,1),
 (347,130,0,500,2),
 (348,130,0,500,1),
 (349,130,500,NULL,1),
 (350,153,500,1500,1),
 (351,153,1500,NULL,1),
 (352,154,500,1500,2),
 (353,154,1500,NULL,2),
 (354,154,0,500,1),
 (355,154,500,NULL,1),
 (356,155,0,500,2),
 (357,155,500,1500,2),
 (358,155,1500,NULL,2);
INSERT INTO `cardservice`.`fee` VALUES  (359,155,0,1000,1),
 (360,155,1000,NULL,1),
 (361,156,0,1000,1),
 (362,156,1000,NULL,1),
 (363,157,0,NULL,2),
 (364,157,0,NULL,1),
 (365,95,0,NULL,1),
 (366,158,0,100,1),
 (367,158,100,200,1),
 (368,158,200,500,1),
 (369,158,500,1500,1),
 (370,158,1500,NULL,1),
 (371,159,0,100,1),
 (372,159,100,200,1),
 (373,159,200,500,1),
 (374,159,500,1500,1),
 (375,159,1500,NULL,1),
 (376,160,0,500,1),
 (377,160,500,NULL,1),
 (378,161,0,500,2),
 (379,161,500,NULL,2),
 (380,161,0,2000,1),
 (381,161,2000,NULL,1),
 (382,162,0,NULL,2),
 (383,162,0,NULL,2),
 (384,162,0,NULL,1),
 (385,163,0,NULL,1),
 (386,164,0,NULL,2),
 (387,164,0,100,1),
 (388,164,100,NULL,1);
CREATE TABLE  `cardservice`.`fee_issuer` (
  `feeId` int(11) NOT NULL,
  `issuerId` int(11) NOT NULL,
  `fee` float NOT NULL default '0',
  PRIMARY KEY  (`feeId`,`issuerId`),
  KEY `fk_fee_issuer_issuer` (`issuerId`),
  CONSTRAINT `fk_fee_issuer_fee` FOREIGN KEY (`feeId`) REFERENCES `fee` (`feeId`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_fee_issuer_issuer` FOREIGN KEY (`issuerId`) REFERENCES `issuer` (`issuerId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
INSERT INTO `cardservice`.`fee_issuer` VALUES  (1,1,15),
 (2,1,14),
 (3,1,13),
 (4,1,12),
 (7,1,11),
 (14,1,11),
 (15,1,10),
 (16,1,9),
 (17,1,15),
 (18,1,14),
 (19,1,13),
 (20,1,12),
 (21,1,111),
 (22,1,11),
 (23,1,15),
 (24,1,14),
 (25,1,13),
 (26,1,12),
 (27,1,11),
 (28,1,15),
 (29,1,14),
 (30,1,12),
 (31,1,10),
 (32,1,9),
 (33,1,9),
 (34,1,14),
 (35,1,12),
 (36,1,13.5),
 (36,2,13.5),
 (37,1,10.5),
 (37,2,12.5),
 (38,1,9.5),
 (38,2,12),
 (39,1,9.5),
 (39,2,12.5),
 (41,1,10),
 (42,1,11),
 (43,1,9),
 (44,1,15),
 (45,1,11),
 (46,1,14),
 (47,1,10),
 (48,1,13),
 (49,1,9),
 (50,1,12),
 (51,1,11),
 (52,1,15),
 (52,2,15),
 (53,1,15),
 (53,2,15),
 (54,1,14),
 (55,1,11),
 (58,1,9),
 (58,2,12),
 (59,1,8.5),
 (59,2,11.5),
 (60,1,11),
 (61,1,10.5),
 (61,2,12.5),
 (62,1,12),
 (62,2,14),
 (63,1,10),
 (63,2,12.5),
 (64,1,15),
 (64,2,15),
 (65,1,13.5),
 (65,2,14),
 (66,1,9.5),
 (66,2,12),
 (67,1,13.5),
 (67,2,13.5),
 (68,1,10.5),
 (68,2,12.5),
 (69,1,9.5),
 (69,2,12),
 (72,1,10.5),
 (73,1,10),
 (74,1,9.5),
 (75,1,14);
INSERT INTO `cardservice`.`fee_issuer` VALUES  (75,2,15),
 (76,1,14),
 (76,2,14),
 (77,1,14),
 (77,2,15),
 (78,1,13),
 (78,2,14),
 (79,1,11),
 (79,2,13.5),
 (80,1,10),
 (80,2,12.5),
 (81,1,9.5),
 (82,1,9),
 (83,1,8.5),
 (84,1,12.5),
 (84,2,15),
 (85,1,12.5),
 (85,2,15),
 (87,1,15),
 (87,2,15),
 (88,1,13.5),
 (88,2,14),
 (89,1,9.5),
 (89,2,12.5),
 (90,1,10.5),
 (90,2,12.5),
 (91,1,9.5),
 (91,2,12),
 (92,1,9),
 (92,2,11.5),
 (93,1,11.5),
 (93,2,13.5),
 (94,1,10.5),
 (94,2,12.5),
 (95,1,9.5),
 (95,2,11.5),
 (100,1,12),
 (100,2,12),
 (101,1,10),
 (101,2,12),
 (102,1,12),
 (102,2,12),
 (103,1,11),
 (104,1,9),
 (105,2,14),
 (106,1,11),
 (107,1,9),
 (108,2,14),
 (109,1,11),
 (110,1,9),
 (111,1,11),
 (112,1,9),
 (113,2,14),
 (114,1,11),
 (114,2,14),
 (115,1,15),
 (115,2,15),
 (116,1,15),
 (116,2,15),
 (117,1,11),
 (117,2,13.5),
 (118,1,13.5),
 (118,2,13.5),
 (119,1,11.5),
 (119,2,11.5),
 (120,1,12),
 (120,2,12),
 (121,1,10.5),
 (121,2,12.5),
 (122,1,9.5),
 (122,2,12),
 (138,1,11),
 (138,2,13.5),
 (139,1,10.5);
INSERT INTO `cardservice`.`fee_issuer` VALUES  (139,2,12.5),
 (140,1,9.5),
 (140,2,12),
 (141,1,14),
 (141,2,16.5),
 (142,1,13.5),
 (142,2,15.5),
 (143,1,12.5),
 (143,2,15),
 (180,1,15),
 (181,1,14),
 (182,1,13),
 (183,1,12),
 (184,1,11),
 (185,1,15),
 (186,1,14),
 (187,1,13),
 (188,1,12),
 (189,1,11),
 (190,1,9),
 (191,1,8.5),
 (192,1,10.5),
 (192,2,12.5),
 (193,1,15),
 (194,1,14),
 (195,1,13),
 (196,1,12),
 (197,1,11),
 (198,1,15),
 (198,2,15),
 (199,1,13.5),
 (199,2,14),
 (200,1,9.5),
 (200,2,12),
 (201,1,14),
 (201,2,15),
 (202,1,13),
 (202,2,14),
 (203,1,14),
 (204,1,12),
 (205,1,13.5),
 (205,2,13.5),
 (206,1,11.5),
 (206,2,11.5),
 (207,1,10.5),
 (207,2,12.5),
 (208,1,9.5),
 (208,2,12),
 (209,1,9),
 (209,2,11.5),
 (210,1,15),
 (210,2,15),
 (211,1,15),
 (211,2,15),
 (212,1,10),
 (212,2,12),
 (213,1,12),
 (213,2,14),
 (214,1,10),
 (214,2,12.5),
 (215,1,12),
 (215,2,12),
 (216,1,10),
 (217,1,11),
 (218,1,10),
 (219,1,9),
 (220,1,15),
 (221,1,14),
 (222,1,12),
 (223,1,10),
 (224,1,9),
 (225,1,11);
INSERT INTO `cardservice`.`fee_issuer` VALUES  (226,1,10),
 (227,1,9),
 (228,1,15),
 (228,2,15),
 (229,1,12.5),
 (229,2,13),
 (230,1,12),
 (230,2,12.5),
 (231,1,11),
 (231,2,12),
 (232,1,10),
 (232,2,11.5),
 (233,1,10.5),
 (234,1,10),
 (235,1,9.5),
 (236,1,11),
 (236,2,14),
 (237,1,9),
 (238,1,13.5),
 (238,2,13.5),
 (239,1,10.5),
 (239,2,12.5),
 (240,1,9.5),
 (240,2,12),
 (241,1,9.5),
 (242,1,10.5),
 (242,2,12.5),
 (243,1,9.5),
 (243,2,12),
 (244,1,11.5),
 (244,2,13.5),
 (245,1,10.5),
 (245,2,12.5),
 (246,1,9.5),
 (246,2,11.5),
 (247,1,14),
 (247,2,16.5),
 (248,1,13.5),
 (248,2,15.5),
 (249,1,12.5),
 (249,2,15),
 (250,1,15),
 (251,1,14),
 (252,1,12),
 (253,1,10),
 (254,1,9),
 (255,1,15),
 (255,2,10.8),
 (256,1,14),
 (256,2,10.8),
 (257,1,9),
 (257,2,10.8),
 (258,1,10),
 (258,2,10.8),
 (259,1,12),
 (259,2,10.8),
 (260,1,10),
 (260,2,10.8),
 (261,1,9),
 (261,2,10.8),
 (262,1,15),
 (263,1,14),
 (264,1,12),
 (265,1,10),
 (266,1,9),
 (267,2,10.8),
 (268,2,10.8),
 (269,1,12),
 (269,2,14),
 (270,1,11),
 (270,2,13.5);
INSERT INTO `cardservice`.`fee_issuer` VALUES  (271,1,10),
 (271,2,12.5),
 (272,1,15),
 (272,2,15),
 (273,1,12),
 (273,2,12),
 (274,1,11),
 (274,2,11.5),
 (276,1,13),
 (276,2,14.5),
 (277,1,13),
 (277,2,14.5),
 (282,1,13),
 (282,2,14.5),
 (283,1,13),
 (283,2,14.5),
 (283,11,13),
 (284,1,11),
 (284,2,14),
 (285,1,11),
 (285,2,14),
 (285,11,14),
 (286,1,11),
 (286,2,14),
 (286,11,14),
 (287,1,11),
 (287,2,13.5),
 (288,1,10),
 (288,2,12.5),
 (289,1,13),
 (289,2,14.5),
 (290,1,10.5),
 (290,2,12),
 (290,11,10.5),
 (291,1,12.5),
 (291,2,12.5),
 (291,11,12.5),
 (292,1,10.5),
 (292,2,12),
 (292,11,10.5),
 (293,1,13.5),
 (293,2,15),
 (293,11,13.5),
 (294,1,13.5),
 (294,2,15),
 (294,11,13.5),
 (295,1,15),
 (295,2,15),
 (296,1,13.5),
 (296,2,14),
 (297,1,9.5),
 (297,2,12.5),
 (298,1,11.5),
 (298,2,12.5),
 (298,11,11.5),
 (299,1,11),
 (299,2,12),
 (299,11,11),
 (300,1,13.5),
 (300,2,13.5),
 (301,1,10.5),
 (301,2,12.5),
 (302,1,9.5),
 (302,2,12),
 (303,1,11.5),
 (303,2,12.5),
 (303,11,11.5),
 (304,1,11.5),
 (304,2,12.5);
INSERT INTO `cardservice`.`fee_issuer` VALUES  (304,11,11.5),
 (305,1,10.5),
 (305,2,12),
 (305,11,10.5),
 (306,1,11.5),
 (307,1,10.5),
 (308,1,11.5),
 (308,2,12.5),
 (309,1,10.5),
 (309,2,12),
 (310,1,11),
 (310,2,11.5),
 (311,1,10.5),
 (311,2,12),
 (311,11,10.5),
 (312,1,9.5),
 (313,1,11),
 (313,2,11.5),
 (314,1,11),
 (314,2,11.5),
 (315,1,16),
 (315,2,17.5),
 (316,1,13.5),
 (316,2,15),
 (317,1,11),
 (317,2,12.5),
 (318,1,11.5),
 (319,1,10.5),
 (320,1,15),
 (321,1,11.5),
 (321,2,12.5),
 (321,11,11.5),
 (322,1,10.5),
 (322,2,12),
 (322,11,10.5),
 (323,1,11.5),
 (324,1,10.5),
 (325,1,11),
 (325,2,11.5),
 (326,1,11.5),
 (326,2,12.5),
 (327,1,10.5),
 (327,2,12),
 (328,1,13.5),
 (328,2,13.5),
 (329,1,11.5),
 (329,2,11.5),
 (330,1,11.5),
 (330,2,12.5),
 (330,11,11.5),
 (331,1,11),
 (331,2,12),
 (331,11,11),
 (332,1,13.5),
 (332,2,14.5),
 (332,11,13),
 (333,1,13.5),
 (333,2,14.5),
 (333,11,13.5),
 (334,1,13.5),
 (334,2,14.5),
 (334,11,13),
 (335,1,13.5),
 (335,2,14.5),
 (335,11,13.5),
 (336,1,13),
 (336,2,14.5);
INSERT INTO `cardservice`.`fee_issuer` VALUES  (337,1,13.5),
 (337,2,14.5),
 (337,11,13.5),
 (338,1,13),
 (338,2,14.5),
 (339,1,13.5),
 (339,2,14.5),
 (339,11,13.5),
 (340,1,12.5),
 (340,2,13.5),
 (340,11,12.5),
 (341,1,12),
 (341,2,13),
 (341,11,12),
 (342,1,11.5),
 (342,2,12.5),
 (342,11,11.5),
 (343,1,15),
 (343,2,15),
 (344,1,15),
 (344,2,15),
 (344,11,15),
 (345,1,12),
 (345,2,12),
 (346,1,12),
 (346,2,12),
 (346,11,12),
 (347,1,13.5),
 (347,2,15.5),
 (347,11,14.5),
 (348,1,13.5),
 (348,2,15.5),
 (348,11,14.5),
 (349,1,12.5),
 (349,2,15),
 (349,11,13.5),
 (350,1,12),
 (351,1,11),
 (352,1,12),
 (353,1,11),
 (354,1,11.5),
 (354,2,12),
 (354,11,11.5),
 (355,1,10),
 (355,2,11.5),
 (355,11,10),
 (356,1,11),
 (357,1,10),
 (358,1,9),
 (359,1,9.8),
 (359,2,11.5),
 (359,11,9.8),
 (360,1,9.5),
 (360,2,11.5),
 (360,11,9.5),
 (361,1,11),
 (361,2,12),
 (362,1,10.5),
 (362,2,11.5),
 (363,1,13),
 (363,2,14.5),
 (364,1,13),
 (364,2,14.5),
 (364,11,13),
 (365,1,15),
 (365,2,15),
 (366,1,15),
 (367,1,14),
 (368,1,12);
INSERT INTO `cardservice`.`fee_issuer` VALUES  (369,1,10),
 (370,1,9),
 (371,1,15),
 (372,1,14),
 (373,1,12),
 (374,1,10),
 (375,1,9),
 (376,1,11.5),
 (377,1,10.5),
 (378,1,11.5),
 (379,1,10.5),
 (380,1,9.5),
 (380,11,9.5),
 (381,1,9),
 (381,11,9),
 (382,1,15),
 (382,2,15),
 (382,11,15),
 (383,1,14),
 (383,2,14),
 (383,11,14),
 (384,1,15),
 (384,2,15),
 (384,11,15),
 (385,1,14),
 (385,2,14),
 (385,11,14),
 (386,1,12),
 (386,2,12),
 (387,1,12),
 (387,2,12),
 (387,11,11),
 (388,1,12),
 (388,2,12),
 (388,11,10.5);
CREATE TABLE  `cardservice`.`game_account` (
  `id` int(11) NOT NULL auto_increment,
  `account` varchar(50) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=238756 DEFAULT CHARSET=utf8;
INSERT INTO `cardservice`.`game_account` VALUES  (1,'bv_pro1'),
 (2,'taolaben123'),
 (3,'damvaomatanh'),
 (4,'mavuongtrumau'),
 (5,'longchausa10a9'),
 (6,'concucac00'),
 (7,'ace.001'),
 (8,'giangkhung011'),
 (9,'suzuki0708'),
 (10,'thamtu_2050'),
 (11,'tuanthuduc'),
 (12,'thieunuhothan'),
 (13,'baogianghoovn'),
 (14,'suongyeuoi'),
 (15,'56113.2'),
 (16,'cau.amhp091'),
 (17,'longhp1992'),
 (18,'quangsib0'),
 (19,'dovolo2000'),
 (20,'tientrangduy'),
 (21,'nncchhcn456'),
 (22,'kekhungts2011'),
 (23,'nh0x.ken90'),
 (24,'hongtu82'),
 (25,'thanchetz8'),
 (26,'oneofrose'),
 (27,'kut3boydp'),
 (28,'mycomputer10'),
 (29,'ngothinhuphuong'),
 (30,'nhokdjvippro'),
 (31,'tav0506qn'),
 (32,'chucvuive91'),
 (33,'lonmevlg'),
 (34,'binmoonhit'),
 (35,'hidro73'),
 (36,'nhopro8910'),
 (37,'netthanhdanh2008'),
 (38,'nhanvip2012'),
 (39,'hieucongdo'),
 (40,'rua9x_koyeu'),
 (41,'khuelocnam'),
 (42,'jnto_25989'),
 (43,'beluoi_yeuanh'),
 (44,'conmatgianta_vp91@yahoo.com.vn'),
 (45,'01686315531o'),
 (46,'nguthetq97'),
 (47,'anhdunghp206');
INSERT INTO `cardservice`.`game_account` VALUES  (48,'ptvps2687'),
 (49,'kitakiviv'),
 (50,'duonghoang212'),
 (51,'hjen_proq'),
 (52,'nhoem7x'),
 (53,'dat19pt'),
 (54,'anhthatlavaibuom'),
 (55,'bichtram0163285'),
 (56,'nhutdauvikute'),
 (57,'tquang_90'),
 (58,'giacquang'),
 (59,'luomvetraiso1'),
 (60,'volam11070303'),
 (61,'tancatminh4'),
 (62,'lethanhtankt73'),
 (63,'thang_hp_th'),
 (64,'vipprolathe147'),
 (65,'cholericsukake'),
 (66,'tientai_baibang'),
 (67,'thienlongjsc8'),
 (68,'s0l0mari0'),
 (69,'kimthoaiu'),
 (70,'anhgiapro4567'),
 (71,'callvip'),
 (72,'taokoco9'),
 (73,'minhbtt1998'),
 (74,'tamlove1806'),
 (75,'anhtydubd244'),
 (76,'nhokvkl94'),
 (77,'ngulon_khoncac'),
 (78,'lyhaonam_00'),
 (79,'phamvanvo113'),
 (80,'duonghkal'),
 (81,'vulinhhp1993'),
 (82,'zzsorynhamzz'),
 (83,'taipro14710vn'),
 (84,'khangpanda2'),
 (85,'caoducbinh_277'),
 (86,'hau_vip1995'),
 (87,'zet207'),
 (88,'anh123234'),
 (89,'t0an.ls'),
 (90,'mu_44'),
 (91,'tankhanhpb9xx'),
 (92,'vancuongcvn'),
 (93,'mrtathong1995'),
 (94,'cu_hue_vip');
INSERT INTO `cardservice`.`game_account` VALUES  (95,'lamsaomat'),
 (96,'vipboi089'),
 (97,'tungthuonghg'),
 (98,'taminhbe'),
 (99,'vovanlap111'),
 (100,'o0xecuabe0o'),
 (101,'ga19931994'),
 (102,'maimaiyeuminhem199'),
 (103,'sieucaploves'),
 (104,'kidos.celano'),
 (105,'datax202'),
 (106,'anhprotiphu'),
 (107,'zzzhprozzz'),
 (108,'maimaiyeumotnguoi996'),
 (109,'dabong_1324'),
 (110,'tienganh_90'),
 (111,'chetcungchoi0o0'),
 (112,'songchet7123'),
 (113,'vutruxanh123'),
 (114,'thangkeo0001'),
 (115,'aomong_phudu'),
 (116,'votinhkiss'),
 (117,'ngocphuong007'),
 (118,'trumanmay123'),
 (119,'ngoctrungvp1102'),
 (120,'khanhn01'),
 (121,'pride0104'),
 (122,'63218600'),
 (123,'tabkt95'),
 (124,'gioemodau12'),
 (125,'nhucailon50'),
 (126,'giomuadb2498'),
 (127,'o_name_o'),
 (128,'songkiem00402'),
 (129,'vipocmit3'),
 (130,'emgaiwe2012'),
 (131,'nguoilaxac'),
 (132,'tientu1008'),
 (133,'xxtuahxx'),
 (134,'tomickill_'),
 (135,'wavetaudadaups'),
 (136,'tialia135'),
 (137,'ai_lai_ai'),
 (138,'quyarsenal111'),
 (139,'s2_emoi_bn1667');
INSERT INTO `cardservice`.`game_account` VALUES  (140,'aloemday1888'),
 (141,'vht.lonely'),
 (142,'duycoipl'),
 (143,'vietledtvtk31'),
 (144,'woodboy'),
 (145,'quan_mai1999'),
 (146,'gaconanthit1802'),
 (147,'bopbet'),
 (148,'quanhit68'),
 (149,'thien012234'),
 (150,'khidautrunglo1'),
 (151,'tinhnguoiko'),
 (152,'cutocpro'),
 (153,'taisatthupro'),
 (154,'pe_vip_bibi'),
 (155,'longpute6'),
 (156,'ngheomchx'),
 (157,'t.hai116'),
 (158,'zzliveshowzz'),
 (159,'saxdkny93'),
 (160,'vietdibui123'),
 (161,'anhduongxalo'),
 (162,'canvavi'),
 (163,'bajbangboy9x'),
 (164,'tim858'),
 (165,'letienlanh'),
 (166,'hoangbjcay12'),
 (167,'tetponghimoi'),
 (168,'mimikarachi1989'),
 (169,'llmrbeanll'),
 (170,'thinhanh03'),
 (171,'vnhoachampa2000@gmail.com'),
 (172,'anhduchotpro'),
 (173,'huuviet28'),
 (174,'thixabahien'),
 (175,'kungfu1232'),
 (176,'tienpqkg456'),
 (177,'nguyenvannho011985'),
 (178,'boylucky032'),
 (179,'hithit10'),
 (180,'ngthuanthien'),
 (181,'vang_toibietyeu@yahoo.com'),
 (182,'zezip111'),
 (183,'bylk6');
INSERT INTO `cardservice`.`game_account` VALUES  (184,'phacchanquy'),
 (185,'hungngoc1109'),
 (186,'nana.tinh'),
 (187,'duyenvamy'),
 (188,'trangthu.net'),
 (189,'sugantuyen'),
 (190,'khanhhay456'),
 (191,'nanaanhyeuem3000'),
 (192,'phanthanhnh'),
 (193,'taiboro1475'),
 (194,'vutanst113'),
 (195,'bobabibi9x'),
 (196,'zero000000'),
 (197,'520heokon'),
 (198,'choifavui'),
 (199,'hohoankimvn1991'),
 (200,'vy_yeu_9999'),
 (201,'duybmbm'),
 (202,'tiennga21'),
 (203,'mrbencute1997'),
 (204,'hanglovej1'),
 (205,'phamvanhuy00'),
 (206,'bangphong33'),
 (207,'chjken3k'),
 (208,'mam052vn'),
 (209,'lephuong133'),
 (210,'dvhungqbu'),
 (211,'hainamhehehe'),
 (212,'buithiquy1'),
 (213,'ngokquy244'),
 (214,'tranviettiepmanu'),
 (215,'tuyencaptien'),
 (216,'lamchim1994'),
 (217,'mduybn'),
 (218,'vajlotk'),
 (219,'ahhao1111'),
 (220,'jl0v3y0u97'),
 (221,'thongockahp'),
 (222,'chucvippro02'),
 (223,'123.net.vn'),
 (224,'hoadshp'),
 (225,'anhrokeanh15'),
 (226,'biayenl2k11'),
 (227,'duoitrieu_hoangde'),
 (228,'sagashino97'),
 (229,'mvncmvnc1111');
INSERT INTO `cardservice`.`game_account` VALUES  (230,'vukhiphahuy'),
 (231,'kajdkmm'),
 (232,'thanhthu090'),
 (233,'luankl25'),
 (234,'saxwa@yahoo.com'),
 (235,'thmthm3'),
 (236,'quangphuongkut3'),
 (237,'hieudate'),
 (238,'killerdragon'),
 (239,'anhaiem12sl'),
 (240,'nguyentuprovjp'),
 (241,'1672949830'),
 (242,'pevytxinh'),
 (243,'grimmyshinigami'),
 (244,'procbvodoi123'),
 (245,'do.anh.dang'),
 (246,'daohuyen_dh'),
 (247,'anhhungtieudao96'),
 (248,'thinhvohuuvn'),
 (249,'anh_yeu_baby201'),
 (250,'khikhi1996'),
 (251,'mihayta19'),
 (252,'hoangkimvt92'),
 (253,'mai0976288479'),
 (254,'uyentrang02'),
 (255,'nothingtolose0209'),
 (256,'dotkick5cf'),
 (257,'tunngocbb'),
 (258,'luansay003'),
 (259,'daicamoitapchoi'),
 (260,'he0_ham'),
 (261,'anhtuant'),
 (262,'thjchjinhj'),
 (263,'lonchammuoi11'),
 (264,'tychuot5'),
 (265,'1663290046'),
 (266,'mjsw0n'),
 (267,'handoixecua'),
 (268,'linhlandao123'),
 (269,'toanvotinh1000'),
 (270,'thai91bg'),
 (271,'lht112'),
 (272,'sondong1102'),
 (273,'trungcba123'),
 (274,'sany118');
INSERT INTO `cardservice`.`game_account` VALUES  (275,'hienluongb4'),
 (276,'longconnick'),
 (277,'nhoktk12'),
 (278,'huynhcamthuy2011'),
 (279,'casieu2010'),
 (280,'thang55'),
 (281,'tuanvjj'),
 (282,'kullty2011'),
 (283,'provip_lck'),
 (284,'krakuta'),
 (285,'mitomgaudo115'),
 (286,'nhat1997cb'),
 (287,'phodoaihpvn'),
 (288,'donlon3'),
 (289,'phaloqwe'),
 (290,'kuteoskando1'),
 (291,'khoisung009'),
 (292,'banghinhcf'),
 (293,'thanhdu3nho'),
 (294,'denkta2000'),
 (295,'killcho131'),
 (296,'bequaysh'),
 (297,'conghau_000'),
 (298,'m3oh3n001'),
 (299,'aesakuratuwe'),
 (300,'dungly1988'),
 (301,'thaocui458'),
 (302,'anhyeuemvc123'),
 (303,'cuphay3'),
 (304,'kialov'),
 (305,'converse812'),
 (306,'soocninlove75'),
 (307,'docthanthoi'),
 (308,'2345676'),
 (309,'mythuat123'),
 (310,'vipanhtrinh123'),
 (311,'phamvaniok'),
 (312,'anhtien_susu'),
 (313,'sodach12345'),
 (314,'tu12a'),
 (315,'nguyenkhai43'),
 (316,'buavanthe'),
 (317,'cherist_kt'),
 (318,'lioxca1208'),
 (319,'linhdbpro0'),
 (320,'cachcach0089'),
 (321,'hanhphuc_vk');
INSERT INTO `cardservice`.`game_account` VALUES  (322,'gavcyb4520'),
 (323,'duongqua_1996'),
 (324,'hailien77'),
 (325,'viet_phovac'),
 (326,'ducyeuhoang99'),
 (327,'chuivohe1'),
 (328,'huuhungpro98'),
 (329,'yamahanatas'),
 (330,'volamdaigiaa1no3'),
 (331,'o0trunglove0o'),
 (332,'teopqkg14'),
 (333,'havitq'),
 (334,'botay1986'),
 (335,'unlocksl3'),
 (336,'samhondat'),
 (337,'dinhha20099'),
 (338,'nouvocongtu88'),
 (339,'munham11'),
 (340,'xuanuu1'),
 (341,'nhatubo'),
 (342,'kunbk1'),
 (343,'quocluong12345'),
 (344,'duydu10a9'),
 (345,'aloha_1812'),
 (346,'trieuca1986'),
 (347,'txvt111'),
 (348,'nhocknock92'),
 (349,'bietdoivs3'),
 (350,'traituyenlc'),
 (351,'hoaianhbtt'),
 (352,'ngunhatbaoson'),
 (353,'tai_y_phuong'),
 (354,'boythattinh_love_89@yahoo.com'),
 (355,'sangvlcn2'),
 (356,'thanh123567kb'),
 (357,'minhtiho753@yahoo.com'),
 (358,'kakakajjj'),
 (359,'ninzakute94'),
 (360,'vuonhong62'),
 (361,'caravenoo'),
 (362,'946286089'),
 (363,'otxinh01'),
 (364,'nhiepphong_langtucodon@yahoo.com.vn'),
 (365,'ducmanhcho');
INSERT INTO `cardservice`.`game_account` VALUES  (366,'boy1139001'),
 (367,'thilequochuu'),
 (368,'quanjjkl'),
 (369,'ba_tam88'),
 (370,'thaogk1987'),
 (371,'hoanghien123'),
 (372,'huyenthoi2011vn'),
 (373,'thuyvanxuantuan2013'),
 (374,'hoangviet_89'),
 (375,'ductxpro07'),
 (376,'snsntan'),
 (377,'sadinggon119'),
 (378,'chjckbjs0k'),
 (379,'phuongvumobile8'),
 (380,'minhandyes'),
 (381,'baygu123'),
 (382,'boymt93'),
 (383,'tuprolata2112'),
 (384,'manhmit1111'),
 (385,'macheda27'),
 (386,'ngodangtuany'),
 (387,'anhtien_minh'),
 (388,'timeknight111'),
 (389,'thientan8pro'),
 (390,'votinh696969'),
 (391,'1229503040'),
 (392,'onlytrongdem'),
 (393,'hoaidan113'),
 (394,'hiendothanh'),
 (395,'vnptquangbinh'),
 (396,'audition_you2'),
 (397,'6013'),
 (398,'herzogtt2'),
 (399,'hieuchuse1995'),
 (400,'vuonhoasaodoi2010'),
 (401,'anhtiendat'),
 (402,'retsonghjep'),
 (403,'kull.ngox'),
 (404,'duc11a1nk'),
 (405,'binhtham198'),
 (406,'phamthebao@yahoo.com'),
 (407,'colovekun'),
 (408,'redyanoc'),
 (409,'sangchungz2'),
 (410,'embetapde1');
INSERT INTO `cardservice`.`game_account` VALUES  (411,'giac1133'),
 (412,'toandrhp3'),
 (413,'ductung'),
 (414,'1581992'),
 (415,'daicatam_17'),
 (416,'nhocsocmuonkhoc'),
 (417,'vipboyvina123'),
 (418,'mrac97'),
 (419,'trieuvazzz'),
 (420,'votoan1988'),
 (421,'kucuong7911'),
 (422,'nambk120'),
 (423,'conrong13193'),
 (424,'suachua753439'),
 (425,'t_h_lc186'),
 (426,'babayth'),
 (427,'conquyst1'),
 (428,'catlovely112'),
 (429,'manbru'),
 (430,'phihunganhtuan'),
 (431,'bebu1998hn'),
 (432,'bangdieuzz'),
 (433,'namhavt1998'),
 (434,'pravenvip90'),
 (435,'quycummins01'),
 (436,'kunbabyl0ve'),
 (437,'thehoang52'),
 (438,'doancongtuanvavothithuhien'),
 (439,'ngocsooksd'),
 (440,'tuphuong'),
 (441,'tuongvippro004'),
 (442,'lucky__boys'),
 (443,'lonc.p'),
 (444,'tã i kho?n: daiquato1'),
 (445,'kiemdao91'),
 (446,'xprobg'),
 (447,'chaoanhtuan234'),
 (448,'nhenspide'),
 (449,'buonkhocviai9x'),
 (450,'pelunlun87'),
 (451,'nghiaductri'),
 (452,'anh_boy_9x'),
 (453,'teen9x3031997'),
 (454,'danle_264@yahoo.com'),
 (455,'zdarsun');
INSERT INTO `cardservice`.`game_account` VALUES  (456,'tmvno1lx'),
 (457,'o0_vtqt_0o'),
 (458,'lamle9964070'),
 (459,'907718889'),
 (460,'meobkk'),
 (461,'deptrainhuvboy90'),
 (462,'984390802'),
 (463,'trantheanh731468255'),
 (464,'hiep_yeu123'),
 (465,'nicola_108'),
 (466,'thanhtinhltt34'),
 (467,'hongvangame2007@yahoo.com.vn'),
 (468,'nhut99nhut99'),
 (469,'waynean'),
 (470,'ma0164'),
 (471,'nhj3'),
 (472,'bienbukso234'),
 (473,'tuandung678'),
 (474,'mitmeo12345'),
 (475,'seatermy1002'),
 (476,'tuonghp11'),
 (477,'emvip_22'),
 (478,'vipconan1990'),
 (479,'nol0ve_lk'),
 (480,'p3chjpk0j'),
 (481,'hanggong'),
 (482,'linhtien20'),
 (483,'yeuhang558'),
 (484,'congtungok97'),
 (485,'kutekute291993'),
 (486,'nh0cs0ck286'),
 (487,'702113'),
 (488,'nhanyeui12'),
 (489,'tuyeunhan13'),
 (490,'khanhhung359'),
 (491,'cul0vehe0'),
 (492,'muatua'),
 (493,'dung_linh18'),
 (494,'tranvuongte'),
 (495,'bebulac022'),
 (496,'962467131'),
 (497,'dinhdongpho147'),
 (498,'tieulekiemhd'),
 (499,'bossleloi'),
 (500,'anhtandc');
INSERT INTO `cardservice`.`game_account` VALUES  (501,'sapcon'),
 (502,'mr.bua156'),
 (503,'volam2121988tb'),
 (504,'baokyo3'),
 (505,'loitotinh_trongdemtrangtinhyeu@yahoo.com'),
 (506,'alan031'),
 (507,'1234433808'),
 (508,'masydas123vn'),
 (509,'bool741230'),
 (510,'babylove10102'),
 (511,'chjpchjp_hd'),
 (512,'haducdong16'),
 (513,'yninhbmtbz'),
 (514,'chienthan1207'),
 (515,'cuongk30'),
 (516,'tiasang900'),
 (517,'sakygirldram'),
 (518,'nhomaidange190'),
 (519,'ducthuan8x_@yahoo.com'),
 (520,'party12'),
 (521,'vantamthuydiem'),
 (522,'dihoctoanchoi01'),
 (523,'cf_1904'),
 (524,'kumuko'),
 (525,'ronaldo20111'),
 (526,'dieuthupro'),
 (527,'accbraacc'),
 (528,'cafechoi'),
 (529,'hungsonson'),
 (530,'xjntimau'),
 (531,'uyen2208'),
 (532,'vuhoa1412'),
 (533,'satthupy99'),
 (534,'hiphop98500'),
 (535,'hondianguc'),
 (536,'khoithuoclao1992'),
 (537,'hunter_bk'),
 (538,'zoxuci'),
 (539,'ngocduuun'),
 (540,'nhocsuyou'),
 (541,'doikoemgameover003'),
 (542,'cubinhp93'),
 (543,'hanemvjp'),
 (544,'wavinka'),
 (545,'cutlc');
INSERT INTO `cardservice`.`game_account` VALUES  (546,'manhtambao'),
 (547,'koncamemay'),
 (548,'tuanthuan1998'),
 (549,'torres2102'),
 (550,'haluan94'),
 (551,'dunganhy'),
 (552,'nhunhinho7'),
 (553,'nbtk'),
 (554,'samurai2612'),
 (555,'bxloveoxkissu'),
 (556,'nhatquang2g'),
 (557,'anhtrumjj'),
 (558,'hungga1234o'),
 (559,'sh0ulder0fme'),
 (560,'b0og.style'),
 (561,'traitk101188'),
 (562,'anhemnt90'),
 (563,'hoangtunge'),
 (564,'deptungmilimet1'),
 (565,'lamkiphong_123'),
 (566,'hkt_wan'),
 (567,'hoikute9a2'),
 (568,'tienvang.vn'),
 (569,'hungambjnh1'),
 (570,'boy.da.khet'),
 (571,'theminhnb'),
 (572,'theanh6d1_anh'),
 (573,'chut89'),
 (574,'sasuke_1331992'),
 (575,'quytngot4'),
 (576,'quangquy1990'),
 (577,'nghialun007113'),
 (578,'nhoclocchoc25031996'),
 (579,'gamappro44'),
 (580,'nongdanpro1991'),
 (581,'duchieuss'),
 (582,'phuongyeutan'),
 (583,'xekhongmui123'),
 (584,'haithieutuoi'),
 (585,'kawasaky01'),
 (586,'luongxuantai'),
 (587,'caraven06'),
 (588,'nhieunguoiyeuthich1'),
 (589,'vatvac93'),
 (590,'sodienthoai115');
INSERT INTO `cardservice`.`game_account` VALUES  (591,'bit2010vl'),
 (592,'maybilua'),
 (593,'vannho156'),
 (594,'912063930'),
 (595,'hactuvuong@yahoo.com'),
 (596,'667040'),
 (597,'dekaranger01'),
 (598,'chuphianh'),
 (599,'letsgo1410'),
 (600,'s_ht_yeu_py'),
 (601,'olaolealo'),
 (602,'tuanlklk95'),
 (603,'philaden1o'),
 (604,'kimito9963'),
 (605,'3mju0j123456'),
 (606,'nghiana320'),
 (607,'gunylogin123'),
 (608,'anhphong.199995'),
 (609,'banlopnao'),
 (610,'iogue'),
 (611,'mryeutrang'),
 (612,'huypro2200'),
 (613,'1666315550'),
 (614,'loveless230691'),
 (615,'lamthekhang'),
 (616,'nguyendinhhung89'),
 (617,'sochetwau'),
 (618,'walkalone273'),
 (619,'trongvathinh.tan'),
 (620,'viphuala_101'),
 (621,'linhhaha113'),
 (622,'transangqb93'),
 (623,'pklmchvba'),
 (624,'suknhaem'),
 (625,'muzjnu'),
 (626,'ymmionly'),
 (627,'lequangphucc3'),
 (628,'chienbinh1996@yahoo.com'),
 (629,'ketromhoa1991'),
 (630,'thienblu20002'),
 (631,'anhvietlc345'),
 (632,'narutomoto'),
 (633,'thanroi123'),
 (634,'hpgbod'),
 (635,'sonkimjinh12');
INSERT INTO `cardservice`.`game_account` VALUES  (636,'ngominhquan07'),
 (637,'0986128391_pro'),
 (638,'khanhthohihi'),
 (639,'vipkudog789'),
 (640,'giapluan123'),
 (641,'mizzluv'),
 (642,'nhocmankg888'),
 (643,'hoaloveyouok'),
 (644,'sigagan113'),
 (645,'mikamikamika'),
 (646,'honylove753'),
 (647,'ngoctram2010vn2011vn2011'),
 (648,'anhphienhy126'),
 (649,'chochocho'),
 (650,'likelovez'),
 (651,'cavetau3'),
 (652,'congluyen3'),
 (653,'quanta22190'),
 (654,'gaigiangho_3.0'),
 (655,'viettelmobile237'),
 (656,'633919685'),
 (657,'nholovemya'),
 (658,'hellboy_0306'),
 (659,'jangkoy1102'),
 (660,'luluvodich'),
 (661,'tronono'),
 (662,'colong029'),
 (663,'rongluahg'),
 (664,'dajcanyeu'),
 (665,'baokaka132000'),
 (666,'chinsusuhl'),
 (667,'hoascsc'),
 (668,'anhbrockt'),
 (669,'tumavovo'),
 (670,'duongnhikha'),
 (671,'yentuvi@yahoo.com'),
 (672,'wacua'),
 (673,'ngodaihai123'),
 (674,'debogia02'),
 (675,'hahavip1996'),
 (676,'kokiena03'),
 (677,'buidoideem1'),
 (678,'dangtu007'),
 (679,'kutam13'),
 (680,'cinhanh');
INSERT INTO `cardservice`.`game_account` VALUES  (681,'bjnbg2012'),
 (682,'bocuong89'),
 (683,'hung2525321'),
 (684,'dragon2302'),
 (685,'anhluuvip20'),
 (686,'thang123456tg'),
 (687,'dieppro5432'),
 (688,'studio103'),
 (689,'eva.001'),
 (690,'lilshadyvipboy3'),
 (691,'loimun01'),
 (692,'acthan077'),
 (693,'toansakez'),
 (694,'manhhung89pr'),
 (695,'khaikutehaha'),
 (696,'nguyenmlyc'),
 (697,'hoangtuanminh011'),
 (698,'hieuhs123rrrr'),
 (699,'sonwto1994'),
 (700,'anhhien124'),
 (701,'kimanhpro00'),
 (702,'meongungay1234'),
 (703,'kekhatmau009'),
 (704,'anhthikkk'),
 (705,'5lua5'),
 (706,'vanthanggs1986'),
 (707,'diepbkvn9x'),
 (708,'312662135'),
 (709,'ngoclun69'),
 (710,'anhlenhoc11'),
 (711,'unrinr'),
 (712,'anhlego1995vn'),
 (713,'nhoc.a4'),
 (714,'bogiaankeda2'),
 (715,'303874212'),
 (716,'hoangthao1166'),
 (717,'haibok92'),
 (718,'kudungpro1200'),
 (719,'pe_monkey311'),
 (720,'quoctoan1502'),
 (721,'141219881989'),
 (722,'b4db0ys0ck'),
 (723,'dongfujico'),
 (724,'hagjang1991'),
 (725,'emodau888'),
 (726,'laduydh12');
INSERT INTO `cardservice`.`game_account` VALUES  (727,'kienvip9000x'),
 (728,'anhmay990'),
 (729,'dothimaidung'),
 (730,'xomdinhhehe'),
 (731,'lonanbuoi'),
 (732,'nhuquynhtc031'),
 (733,'duypro123yeuem'),
 (734,'thebrom'),
 (735,'liemday12a3'),
 (736,'tuanthuy1611'),
 (737,'37624210'),
 (738,'koolbynms'),
 (739,'ngotien87'),
 (740,'nhoxzombe1'),
 (741,'baochungcuoi96'),
 (742,'kunguqn'),
 (743,'choideanhem3'),
 (744,'binpro19977ga4'),
 (745,'myheo_dn'),
 (746,'cuteo1372'),
 (747,'kenfx'),
 (748,'bao200752'),
 (749,'truongtoccf'),
 (750,'giang.than'),
 (751,'nhoc.sieuquay_92'),
 (752,'thuson952752'),
 (753,'prosieuquaysever'),
 (754,'tuvy1977'),
 (755,'lonvitdai'),
 (756,'emhimpro'),
 (757,'longvi_23'),
 (758,'huutan1991'),
 (759,'siunhamkg123'),
 (760,'nguyenvanhung_dh'),
 (761,'tuyen.nguyen0807'),
 (762,'nguyenthe113'),
 (763,'bivapo003'),
 (764,'t813855'),
 (765,'dongs2nga1'),
 (766,'camthuylinh91hp'),
 (767,'tuananhkk9x'),
 (768,'beamtham12345'),
 (769,'b6mrtorp'),
 (770,'thanh.ancp'),
 (771,'antergo');
INSERT INTO `cardservice`.`game_account` VALUES  (772,'thepingpong93'),
 (773,'manhdung_n005'),
 (774,'tret13'),
 (775,'phihung_312'),
 (776,'41121'),
 (777,'olalahp2010'),
 (778,'989124567'),
 (779,'973105798'),
 (780,'907444974'),
 (781,'chjna_bu0n'),
 (782,'khocvjaj'),
 (783,'eaglevnn1993'),
 (784,'metoipro2000'),
 (785,'lovwemk4'),
 (786,'trunghieu'),
 (787,'soldaica1992'),
 (788,'chicongzz'),
 (789,'gottinkieu1992'),
 (790,'s2kut3n001'),
 (791,'hellotq89'),
 (792,'operational'),
 (793,'ngocdoalc'),
 (794,'evilvsdemon'),
 (795,'thienhavdpk'),
 (796,'huongcute1997'),
 (797,'huterdu123'),
 (798,'toilaai'),
 (799,'kegietthue0x'),
 (800,'birain242199'),
 (801,'maxsisu09'),
 (802,'ambitious22'),
 (803,'1696982285'),
 (804,'8giaicuu8'),
 (805,'nguoithubafuck'),
 (806,'legendkendy999'),
 (807,'kubao1jjj'),
 (808,'nhatsang10c3119900'),
 (809,'thocnc@yahoo.com'),
 (810,'traingheo12345'),
 (811,'nghichtu_haohoa@yahoo.com'),
 (812,'sonnatao92'),
 (813,'nguyendactuan0@yahoo.com'),
 (814,'huyentrangzzz'),
 (815,'quocduy123puppy');
INSERT INTO `cardservice`.`game_account` VALUES  (816,'oanhdung44'),
 (817,'dosibov'),
 (818,'thangquyenbm'),
 (819,'sathuter'),
 (820,'haquangvien1'),
 (821,'arekeystop'),
 (822,'quyhaubn'),
 (823,'phanhuula123'),
 (824,'phamcuong3'),
 (825,'ychang92'),
 (826,'chithich2010'),
 (827,'p3.he0567'),
 (828,'manhtoan01'),
 (829,'duyhaichamtk1'),
 (830,'vanngan_pro'),
 (831,'ngocbik16'),
 (832,'zombiebmt123'),
 (833,'zinkhumz'),
 (834,'kakashichimt0'),
 (835,'mytoan777'),
 (836,'hotboyminhon'),
 (837,'mrhop1993'),
 (838,'ph4md5y610'),
 (839,'phucnga210'),
 (840,'etbatmuc'),
 (841,'cindy'),
 (842,'akomuonlamngthu3'),
 (843,'dungtha221'),
 (844,'xuankutejj'),
 (845,'daotrumdaklak'),
 (846,'8giotudo407'),
 (847,'arsenal357'),
 (848,'vip_pro_n01'),
 (849,'nhokduongpho02'),
 (850,'satnhan.r10'),
 (851,'dannhay7xd'),
 (852,'nhamlac234'),
 (853,'khuvuontrenmay'),
 (854,'duc2010bd'),
 (855,'pholaytb'),
 (856,'nhanfipi'),
 (857,'volamliendau250493'),
 (858,'phuonglangtu2'),
 (859,'buumbao'),
 (860,'2tay1em77'),
 (861,'kh0ctham.hb91');
INSERT INTO `cardservice`.`game_account` VALUES  (862,'minhhoaitk'),
 (863,'linh1135'),
 (864,'denhatmu113'),
 (865,'kiss_no_fell'),
 (866,'987377406'),
 (867,'tuyen8198'),
 (868,'song9a5'),
 (869,'papazaraboy'),
 (870,'toanhscamau'),
 (871,'anhvip00co'),
 (872,'vanthai2020'),
 (873,'thaing0c10902'),
 (874,'hugongtrum'),
 (875,'nuvuong2412955'),
 (876,'kendaigia'),
 (877,'alicudong2003'),
 (878,'pun223161'),
 (879,'mocchau2009'),
 (880,'vietnampo'),
 (881,'khang84007'),
 (882,'maiyeubs109'),
 (883,'ntlampro004'),
 (884,'nhatkiemtrunghoa_321@yahoo.com'),
 (885,'tranthang000000'),
 (886,'gialong16_teen'),
 (887,'tuannhoxq9'),
 (888,'ngheovai10'),
 (889,'beheokuteo'),
 (890,'yma10a5'),
 (891,'thiengsatthu27'),
 (892,'leleconle'),
 (893,'tanquy.1'),
 (894,'petong321'),
 (895,'phuprovip'),
 (896,'anhcuatui_1994@yahoo.com'),
 (897,'mpkz1987'),
 (898,'nghiahuycb'),
 (899,'lonelystar86'),
 (900,'longbhlinh'),
 (901,'leexehan'),
 (902,'suthatlathe12'),
 (903,'donbk3011'),
 (904,'nhockktt221'),
 (905,'taytay_88');
INSERT INTO `cardservice`.`game_account` VALUES  (906,'boyllboy80'),
 (907,'menthod555'),
 (908,'babybabyupp'),
 (909,'suphuchien1996'),
 (910,'hackgamefpt'),
 (911,'1692650436'),
 (912,'bb.nh0k'),
 (913,'vipauforever'),
 (914,'anhtaisalo1'),
 (915,'thihoapro9x'),
 (916,'vuagialap'),
 (917,'tinhanh039'),
 (918,'tailang92'),
 (919,'halaocai8189'),
 (920,'empro0550'),
 (921,'hanviyeu12z1'),
 (922,'namvip9xcp'),
 (923,'anhcongchuaat3vn'),
 (924,'duyennfbk'),
 (925,'whatdoyou2'),
 (926,'boyvipkute12345'),
 (927,'mychinh101'),
 (928,'caotrungtinpro'),
 (929,'vietmienlc'),
 (930,'sairuibowa555'),
 (931,'tayyeudai'),
 (932,'qhai341'),
 (933,'1hungtang'),
 (934,'trunghieudtd'),
 (935,'huynhthetram'),
 (936,'stupit_ty.kull'),
 (937,'pepssi9x'),
 (938,'sovogovip113'),
 (939,'hackvn112'),
 (940,'nhindoikotot'),
 (941,'ngocanhthobong'),
 (942,'nguyenlamtung4'),
 (943,'asonvip969'),
 (944,'xuan999'),
 (945,'htplayboy'),
 (946,'c0ockai'),
 (947,'obamabalabum'),
 (948,'gjangho_82'),
 (949,'taivisao60'),
 (950,'973997281');
INSERT INTO `cardservice`.`game_account` VALUES  (951,'muahethatvui'),
 (952,'namcu_4'),
 (953,'twilightsaga2505'),
 (954,'nhoklong2525'),
 (955,'1223453719'),
 (956,'cubin.2006@yahoo.com'),
 (957,'toipro00bk'),
 (958,'monsterjjjj'),
 (959,'7pinkky7'),
 (960,'nhathocf'),
 (961,'vume_vucon_bg'),
 (962,'k.benzema_messi'),
 (963,'982143016'),
 (964,'menxboy1993'),
 (965,'anhvinh2002010'),
 (966,'thienlongbqt'),
 (967,'haivinhteo12345'),
 (968,'anhhaibn119'),
 (969,'nh0xjusock3'),
 (970,'1phatvaoko'),
 (971,'hunghd45'),
 (972,'tomtitvn'),
 (973,'kupin2468'),
 (974,'1685546939'),
 (975,'tatdat200'),
 (976,'kinhcuong76'),
 (977,'tuantmp'),
 (978,'kethatbai54119'),
 (979,'luan11345'),
 (980,'kuteprovjp0258'),
 (981,'dukopro_no1'),
 (982,'0kuroro0'),
 (983,'utloan'),
 (984,'trungsit113'),
 (985,'hieu01688924492'),
 (986,'traixunghe0'),
 (987,'lonem0'),
 (988,'nh0ckbi3593'),
 (989,'hoangkimhot'),
 (990,'nogo4422'),
 (991,'haclongdaica39vn'),
 (992,'zinzin2612'),
 (993,'mtt48dh2'),
 (994,'vutienhai93'),
 (995,'huytruongday');
INSERT INTO `cardservice`.`game_account` VALUES  (996,'tjeuquy_yeuem'),
 (997,'tailoi8bo'),
 (998,'minhga91'),
 (999,'minhculon'),
 (1000,'minhtungtn10');
CREATE TABLE  `cardservice`.`issuer` (
  `issuerId` int(11) NOT NULL auto_increment,
  `name` varchar(100) NOT NULL,
  `fee` float(4,2) NOT NULL default '0.00',
  `fullName` varchar(100) default NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  `contractNumber` varchar(30) NOT NULL,
  `companyName` varchar(30) NOT NULL,
  `companyCode` varchar(30) NOT NULL,
  `compareType` int(11) default '0' COMMENT 'Loai doi soat. 0: thang; 1: ngay',
  `sessionValue` varchar(100) default NULL,
  PRIMARY KEY  (`issuerId`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8;
INSERT INTO `cardservice`.`issuer` VALUES  (1,'MOBI',9.00,'Mobifone','2011-09-14 16:31:29','','MOBITECHS','VMS',0,NULL),
 (2,'VINA',11.00,'Vinaphone','2012-04-19 15:58:20','','VINA','VINA',1,'c9ae6d237f000001015b9f9ae7b31abb7f000001015b9f9a'),
 (3,'KM',10.00,'Khuyen Mai','2011-09-30 13:22:04','','Khuyen Mai','KM',0,NULL),
 (11,'VT',8.50,'Viettel','2012-01-10 12:00:00','','Viettel','Viettel',1,NULL);
CREATE TABLE  `cardservice`.`partner` (
  `partnerId` int(11) NOT NULL auto_increment,
  `partnerCode` varchar(50) NOT NULL,
  `createDate` date NOT NULL,
  `secretKey` varchar(255) NOT NULL,
  `password` varchar(50) NOT NULL,
  `isLock` tinyint(1) NOT NULL default '0',
  `notes` varchar(200) default NULL,
  `validIps` varchar(300) default NULL,
  `mailAddress` varchar(200) default NULL,
  `partnerName` varchar(100) default NULL,
  `phone` varchar(35) default NULL,
  `bankName0` varchar(100) default NULL,
  `bankAccount0` varchar(100) default NULL,
  `bankAddress0` varchar(100) default NULL,
  `bankAccountHolder0` varchar(100) default NULL,
  `bankName1` varchar(100) default NULL,
  `bankAccount1` varchar(100) default NULL,
  `bankAddress1` varchar(100) default NULL,
  `bankAccountHolder1` varchar(100) default NULL,
  `businessContactName` varchar(50) default NULL,
  `businessContactEmail` varchar(50) default NULL,
  `businessContactPhone` varchar(50) default NULL,
  `techniqueContactName` varchar(50) default NULL,
  `techniqueContactEmail` varchar(50) default NULL,
  `techniqueContactPhone` varchar(50) default NULL,
  `compareContactName` varchar(50) default NULL,
  `compareContactEmail` varchar(50) default NULL,
  `compareContactPhone` varchar(50) default NULL,
  `KT_DT` varchar(35) default NULL,
  `KT_Email` varchar(35) default NULL,
  `KT_HoTen` varchar(35) default NULL,
  `KD_DT` varchar(35) default NULL,
  `KD_Email` varchar(35) default NULL,
  `KD_HoTen` varchar(35) default NULL,
  `DS_DT` varchar(35) default NULL,
  `DS_Email` varchar(35) default NULL,
  `DS_HoTen` varchar(35) default NULL,
  PRIMARY KEY  (`partnerId`)
) ENGINE=InnoDB AUTO_INCREMENT=275 DEFAULT CHARSET=utf8 COMMENT='InnoDB free: 11264 kB; (`paymentPeriodId`) REFER `cardservic';
INSERT INTO `cardservice`.`partner` VALUES  (32,'vss','2011-06-28','vss_sk','E10ADC3949BA59ABBE56E057F20F883E',0,'','210.245.52.114;58.187.44.198;117.3.66.144;14.160.51.246;116.98.7.178;180.148.138.131;222.255.28.184;10.200.83.36;123.30.6.3;14.160.70.42;115.84.178.140;123.30.111.75;113.161.74.215;27.118.16.254','sales.vcard@vietpay.vn','Công ty vss','','','','','','','','','','','','','','','','','','',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),
 (274,'lemacau','2012-04-26','tI2DiEC7Uf','7286C5F018A74DB44654D017C990456A',0,NULL,'46.137.241.225','thegioigame888@gmail.com','lemacau','','','','','','','','','','','','','','','','','','',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);
CREATE TABLE  `cardservice`.`payment` (
  `paymentId` int(11) NOT NULL auto_increment,
  `contractPeriodId` int(11) default NULL,
  `issuerId` int(11) default NULL,
  `originalValue` bigint(20) default NULL,
  `originalFee` float default NULL,
  `originalIncome` bigint(20) default NULL,
  `value` bigint(20) default NULL,
  `fee` float default NULL,
  `income` bigint(20) default NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`paymentId`),
  KEY `fk_payment_contractIssuer` (`issuerId`),
  KEY `fk_payment_contract_period` (`contractPeriodId`),
  CONSTRAINT `fk_payment_contract_period` FOREIGN KEY (`contractPeriodId`) REFERENCES `contract_period` (`contractPeriodId`) ON UPDATE CASCADE,
  CONSTRAINT `fk_payment_issuer` FOREIGN KEY (`issuerId`) REFERENCES `issuer` (`issuerId`) ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=705 DEFAULT CHARSET=utf8;

DELIMITER $$

CREATE DEFINER = `root`@`localhost` TRIGGER  `cardservice`.`insert_payment` AFTER INSERT ON `payment` FOR EACH ROW BEGIN
   INSERT INTO compare_partner(paymentId, amount, originalVolume, vietpayVolume)
   SELECT NEW.paymentId, par, if(volume is null,0,volume), if(volume is null,0,volume) FROM            
      (SELECT c.par , sum(s.volume) as volume
      FROM statistic_day s       
      INNER JOIN contract_period cp ON cp.contractPeriodId = NEW.contractPeriodId AND (s.requestDate BETWEEN cp.startPeriodDate AND cp.endPeriodDate)
      INNER JOIN contract co ON cp.contractId = co.contractId   AND s.partnerId = co.partnerId      
      RIGHT JOIN card c ON c.cardId = s.cardId AND c.issuerId = NEW.issuerId            
      WHERE c.par > 0         
      GROUP BY c.par order by par asc) a;

   UPDATE contract_period  
      SET originalValue = originalValue + NEW.originalValue,
      value = value + IF(NEW.value is null,0,NEW.value),
	income = income + IF(NEW.income is null,0,NEW.income)
      WHERE contractPeriodId = NEW.contractPeriodId;
END $$

DELIMITER ;

DELIMITER $$

CREATE DEFINER = `root`@`localhost` TRIGGER  `cardservice`.`update_payment` AFTER UPDATE ON `payment` FOR EACH ROW BEGIN
   IF ((NEW.value != OLD.value) OR (OLD.income != NEW.income)) THEN
      UPDATE contract_period
      SET value = value - IF(OLD.value is null,0,OLD.value) + IF(NEW.value is NULL,0,NEW.value),
      income = income - IF(OLD.income is null,0,OLD.income) + IF(NEW.income is NULL,0,NEW.income)
	WHERE contractPeriodId = NEW.contractPeriodId;
   END IF;
END $$

DELIMITER ;
CREATE TABLE  `cardservice`.`paymenthistory` (
  `contractPeriodId` int(11) default NULL,
  `statusId` int(11) default NULL,
  `description` varchar(100) default NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  `type` int(11) default NULL COMMENT '0:Vietpay; 1:Khach hang; 2:Ket thuc DS',
  KEY `fk_paymenthistory_payment` (`contractPeriodId`),
  KEY `fk_paymenthistory_paymentstatus` (`statusId`),
  KEY `idx_paymentId_statusId_type` (`contractPeriodId`,`statusId`,`type`),
  CONSTRAINT `fk_paymenthistory_contract_period` FOREIGN KEY (`contractPeriodId`) REFERENCES `contract_period` (`contractPeriodId`) ON UPDATE CASCADE,
  CONSTRAINT `fk_paymenthistory_paymentstatus` FOREIGN KEY (`statusId`) REFERENCES `paymentstatus` (`statusId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE  `cardservice`.`paymentperiod` (
  `paymentPeriodId` int(11) NOT NULL,
  `name` varchar(30) default NULL,
  `maxCompareDay` int(11) default NULL,
  `maxPaymentDay` int(11) default NULL,
  PRIMARY KEY  (`paymentPeriodId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE  `cardservice`.`paymentstatus` (
  `statusId` int(11) NOT NULL,
  `name` varchar(30) NOT NULL,
  PRIMARY KEY  (`statusId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
INSERT INTO `cardservice`.`paymentstatus` VALUES  (1,'Đối soát'),
 (2,'Yêu cầu thanh toán'),
 (3,'Đã thanh toán');
CREATE TABLE  `cardservice`.`provider` (
  `providerId` int(11) NOT NULL auto_increment,
  `name` varchar(100) default NULL,
  `code` varchar(10) NOT NULL,
  `ips` varchar(300) default NULL,
  `serviceName` varchar(100) NOT NULL,
  `secretKey` varchar(100) default NULL,
  PRIMARY KEY  (`providerId`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
INSERT INTO `cardservice`.`provider` VALUES  (1,'FGame','FGAME','192.168.10.103','fgameService','a40z13m10'),
 (2,'VDC','VDC','','',NULL);
CREATE TABLE  `cardservice`.`statistic_day` (
  `partnerId` int(11) NOT NULL,
  `requestDate` date NOT NULL,
  `cardId` int(11) NOT NULL,
  `volume` int(11) NOT NULL,
  `value` bigint(20) NOT NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`partnerId`,`requestDate`,`cardId`),
  KEY `fk_statistic_day_card` (`cardId`),
  KEY `idx_requestDate` (`requestDate`),
  CONSTRAINT `fk_statistic_day_card` FOREIGN KEY (`cardId`) REFERENCES `card` (`cardId`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_statistic_day_partner` FOREIGN KEY (`partnerId`) REFERENCES `partner` (`partnerId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED;

DELIMITER $$

CREATE DEFINER = `root`@`localhost` TRIGGER  `cardservice`.`delete_statistic_day` AFTER DELETE ON `statistic_day` FOR EACH ROW BEGIN
 
	INSERT INTO d_day VALUES (OLD.partnerId, OLD.requestDate, OLD.cardId, OLD.volume, OLD.value, current_timestamp());

END $$

DELIMITER ;
CREATE TABLE  `cardservice`.`statistic_hour` (
  `partnerId` int(11) NOT NULL,
  `requestDate` date NOT NULL,
  `hour` int(2) unsigned zerofill NOT NULL default '00',
  `cardId` int(11) NOT NULL,
  `volume` int(11) NOT NULL,
  `value` bigint(20) NOT NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`partnerId`,`requestDate`,`hour`,`cardId`),
  KEY `fk_statistic_hour_card` (`cardId`),
  CONSTRAINT `fk_statistic_hour_card` FOREIGN KEY (`cardId`) REFERENCES `card` (`cardId`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_statistic_hour_partner` FOREIGN KEY (`partnerId`) REFERENCES `partner` (`partnerId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED;

DELIMITER $$

CREATE DEFINER = `root`@`localhost` TRIGGER  `cardservice`.`delete_statistic_hour` AFTER DELETE ON `statistic_hour` FOR EACH ROW BEGIN
 
	INSERT INTO d_hour VALUES (OLD.partnerId, OLD.requestDate, OLD.hour, OLD.cardId, OLD.volume, OLD.value, current_timestamp());

END $$

DELIMITER ;
CREATE TABLE  `cardservice`.`statistic_month` (
  `partnerId` int(11) NOT NULL,
  `month` int(11) NOT NULL,
  `year` int(11) NOT NULL,
  `cardId` int(11) NOT NULL,
  `volume` int(11) NOT NULL,
  `value` bigint(20) NOT NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  PRIMARY KEY  (`partnerId`,`month`,`year`,`cardId`),
  KEY `fk_cardId` (`cardId`),
  CONSTRAINT `fk_cardId` FOREIGN KEY (`cardId`) REFERENCES `card` (`cardId`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_statistic_month_partner` FOREIGN KEY (`partnerId`) REFERENCES `partner` (`partnerId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=FIXED;

DELIMITER $$

CREATE DEFINER = `root`@`localhost` TRIGGER  `cardservice`.`delete_statistic_month` AFTER DELETE ON `statistic_month` FOR EACH ROW BEGIN
 
	INSERT INTO d_month VALUES (OLD.partnerId, OLD.month, OLD.year, OLD.cardId, OLD.volume, OLD.value, current_timestamp());

END $$

DELIMITER ;
CREATE TABLE  `cardservice`.`transaction` (
  `transactionId` int(11) NOT NULL auto_increment,
  `partnerId` int(10) default NULL,
  `cardId` int(11) default NULL,
  `cardCode` varchar(30) collate utf8_unicode_ci default NULL,
  `transRefId` varchar(30) collate utf8_unicode_ci default NULL,
  `requestTime` datetime default NULL,
  `requestFromIp` varchar(20) collate utf8_unicode_ci default NULL,
  `responseTime` datetime default NULL,
  `responseStatus` varchar(10) collate utf8_unicode_ci default NULL,
  `responseDescription` varchar(100) collate utf8_unicode_ci default NULL,
  `status` varchar(10) collate utf8_unicode_ci default NULL,
  `transRefCode` bigint(20) default NULL,
  `checkCardResponse` varchar(50) collate utf8_unicode_ci default NULL,
  `useCardResponse` varchar(100) collate utf8_unicode_ci default NULL,
  `responseToPartner` varchar(100) collate utf8_unicode_ci default NULL,
  `telcotransRefId` varchar(50) collate utf8_unicode_ci default NULL,
  `accountId` varchar(50) collate utf8_unicode_ci default NULL,
  `cardSerial` varchar(20) collate utf8_unicode_ci default NULL,
  `lastModified` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
  `providerId` int(11) default NULL,
  PRIMARY KEY  (`transactionId`),
  KEY `idx_requesttime` (`requestTime`),
  KEY `fk_transaction_partner` (`partnerId`),
  KEY `fk_transaction_card` (`cardId`),
  KEY `idx_partnerId_requesttime` (`partnerId`,`requestTime`),
  KEY `idx_partnerId_requesttime_cardCode_transRefId` (`partnerId`,`requestTime`,`cardCode`,`transRefId`),
  KEY `idx_cardCode_transRefId` (`cardCode`,`transRefId`),
  CONSTRAINT `fk_transaction_card` FOREIGN KEY (`cardId`) REFERENCES `card` (`cardId`),
  CONSTRAINT `fk_transaction_partner` FOREIGN KEY (`partnerId`) REFERENCES `partner` (`partnerId`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3445155 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
INSERT INTO `cardservice`.`transaction` VALUES  (3445151,32,18,'196086500906','042012_1335437172468','2012-04-26 17:40:28','14.160.90.86',NULL,'13','He thong cua Don vi phat hanh dang ban','0',NULL,NULL,NULL,'13|He thong cua Don vi phat hanh dang ban',NULL,NULL,'UPZ297866','2012-04-26 17:40:48',NULL),
 (3445152,32,18,'196086500906','042012_1335437777480','2012-04-26 17:50:34','14.160.90.86',NULL,NULL,NULL,'0',NULL,NULL,NULL,NULL,NULL,NULL,NULL,'2012-04-26 17:50:34',NULL),
 (3445153,32,18,'196086500906','042012_1335438216824','2012-04-26 17:57:52','14.160.90.86',NULL,'00','Ma so nap tien khong ton tai hoac da duoc su dung','0',NULL,NULL,NULL,'00|Ma so nap tien khong ton tai hoac da duoc su dung',NULL,NULL,'UPZ297866','2012-04-26 17:57:52',1),
 (3445154,32,17,'495697799300','042012_1335510335426','2012-04-27 13:59:40','14.160.90.86',NULL,'00','Ma so nap tien khong ton tai hoac da duoc su dung','0',NULL,NULL,NULL,'00|Ma so nap tien khong ton tai hoac da duoc su dung',NULL,NULL,'UPZ297866','2012-04-27 13:59:45',1);

DELIMITER $$

CREATE DEFINER = `root`@`localhost` TRIGGER  `cardservice`.`insert_transaction` AFTER INSERT ON `transaction` FOR EACH ROW BEGIN
	DECLARE newDate DATE DEFAULT date(NEW.requesttime);
	DECLARE newHour INT DEFAULT hour(NEW.requesttime);
	DECLARE newMonth INT DEFAULT month(NEW.requesttime);
	DECLARE newYear INT DEFAULT year(NEW.requesttime);
	
	DECLARE	parValue INT DEFAULT 0;

IF (NEW.cardId IS NOT NULL) THEN
	SELECT par INTO parValue FROM card WHERE cardId = NEW.cardId;
END IF;
IF (parValue > 0) THEN
	INSERT INTO statistic_hour(partnerId,requestDate,hour,cardId,volume,value)			    				
		VALUES(NEW.partnerId,newDate,newHour,NEW.cardId,1,parValue)
		ON DUPLICATE KEY UPDATE
			volume = volume + 1,
			value = value + parValue;		

	INSERT INTO statistic_day(partnerId,requestDate,cardId,volume,value)			    				
		VALUES(NEW.partnerId,newDate,NEW.cardId,1,parValue)
		ON DUPLICATE KEY UPDATE
			volume = volume + 1,
			value = value + parValue;
				
	INSERT INTO statistic_month(partnerId,month,year,cardId,volume,value)			    				
		VALUES(NEW.partnerId,newMonth,newYear,NEW.cardId,1,parValue)
		ON DUPLICATE KEY UPDATE
			volume = volume + 1,
			value = value + parValue;	
END IF;      	
END $$

DELIMITER ;

DELIMITER $$

CREATE DEFINER = `root`@`localhost` TRIGGER  `cardservice`.`update_transaction` AFTER UPDATE ON `transaction` FOR EACH ROW BEGIN
	DECLARE oldDate DATE DEFAULT date(OLD.requesttime);
	DECLARE oldHour INT DEFAULT hour(OLD.requesttime);
	DECLARE oldMonth INT DEFAULT month(OLD.requesttime);
	DECLARE oldYear INT DEFAULT year(OLD.requesttime);

	DECLARE newDate DATE DEFAULT date(NEW.requesttime);
	DECLARE newHour INT DEFAULT hour(NEW.requesttime);
	DECLARE newMonth INT DEFAULT month(NEW.requesttime);
	DECLARE newYear INT DEFAULT year(NEW.requesttime);
	
	DECLARE	parValue INT DEFAULT 0;

IF (OLD.partnerId != NEW.partnerId OR OLD.cardId != NEW.cardId) THEN
	SELECT par INTO parValue FROM card WHERE cardId = OLD.cardId;
	IF (parValue > 0) THEN
		UPDATE statistic_hour SET			
			volume = volume - 1,
			value = value - parValue
			WHERE partnerId = OLD.partnerId AND requestDate = oldDate 
				AND hour = oldHour AND cardId = OLD.cardId;		
		
		UPDATE statistic_day SET			
			volume = volume - 1,
			value = value - parValue
			WHERE partnerId = OLD.partnerId AND requestDate = oldDate AND cardId = OLD.cardId;				
		
		UPDATE statistic_month SET			
			volume = volume - 1,
			value = value - parValue
			WHERE partnerId = OLD.partnerId AND month = oldMonth AND year = oldYear AND cardId = OLD.cardId;				
	END IF;

	SELECT par INTO parValue FROM card WHERE cardId = NEW.cardId;
	IF (parValue > 0) THEN
		INSERT INTO statistic_hour(partnerId,requestDate,hour,cardId,volume,value)			    				
			VALUES(NEW.partnerId,newDate,newHour,NEW.cardId,1,parValue)
			ON DUPLICATE KEY UPDATE
				volume = volume + 1,
				value = value + parValue;		

		INSERT INTO statistic_day(partnerId,requestDate,cardId,volume,value)			    				
			VALUES(NEW.partnerId,newDate,NEW.cardId,1,parValue)
			ON DUPLICATE KEY UPDATE
				volume = volume + 1,
				value = value + parValue;
				
		INSERT INTO statistic_month(partnerId,month,year,cardId,volume,value)			    				
			VALUES(NEW.partnerId,newMonth,newYear,NEW.cardId,1,parValue)
			ON DUPLICATE KEY UPDATE
				volume = volume + 1,
				value = value + parValue;		
	END IF;
END IF;
     	
END $$

DELIMITER ;

DELIMITER $$

CREATE DEFINER = `root`@`localhost` TRIGGER  `cardservice`.`delete_transaction` AFTER DELETE ON `transaction` FOR EACH ROW BEGIN
	DECLARE oldDate DATE DEFAULT date(OLD.requesttime);
	DECLARE oldHour INT DEFAULT hour(OLD.requesttime);
	DECLARE oldMonth INT DEFAULT month(OLD.requesttime);
	DECLARE oldYear INT DEFAULT year(OLD.requesttime);	
	
	DECLARE	parValue INT DEFAULT 0;

	SELECT par INTO parValue FROM card WHERE cardId = OLD.cardId;
	IF (parValue > 0) THEN
		UPDATE statistic_hour SET			
			volume = volume - 1,
			value = value - parValue
			WHERE partnerId = OLD.partnerId AND requestDate = oldDate 
				AND hour = oldHour AND cardId = OLD.cardId;		
		
		UPDATE statistic_day SET			
			volume = volume - 1,
			value = value - parValue
			WHERE partnerId = OLD.partnerId AND requestDate = oldDate AND cardId = OLD.cardId;				
		
		UPDATE statistic_month SET			
			volume = volume - 1,
			value = value - parValue
			WHERE partnerId = OLD.partnerId AND month = oldMonth AND year = oldYear AND cardId = OLD.cardId;				
	END IF;
   	
END $$

DELIMITER ;



/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
